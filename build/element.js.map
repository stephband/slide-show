{
  "version": 3,
  "sources": ["https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/cache.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/curry.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/exec.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/capture.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/id.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/noop.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/overload.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/assign.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/create.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element/internals.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/equals.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/get.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/arg.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/self.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/nothing.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/to-type.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream/stopable.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream/stream.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream/combine-stream.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream/clock-stream.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream/throttle-stream.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/stream.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/events.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/parse-value.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/to-rad.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/parse-angle.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/style.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/parse-length.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/gestures.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/is-primary-button.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/rect.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/trigger.js", "../modules/consts.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/is-firefox.js", "../modules/active.js", "../modules/swipes.js", "../modules/scrollends.js", "../modules/lifecycle.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element-1/create-boolean.js", "https://cdn.jsdelivr.net/gh/stephband/fn@master/modules/remove.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element-1/token-list.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element-1/update-token-list.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/element-1/create-token-list.js", "../modules/autoplay.js", "../modules/loop.js", "../modules/navigation.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/delegate.js", "../modules/pagination.js", "../modules/fullscreen.js", "https://cdn.jsdelivr.net/gh/stephband/dom@master/modules/fullscreen.js", "../modules/properties.js", "../element.js"],
  "sourcesContent": ["/**\ncache(fn)\nReturns a function that caches the output values of `fn(input)` against input\nvalues in a map, such that for each input value `fn` is only ever called once.\n*/\n\nlet warned;\n\nexport default function cacheByObject(fn) {\n    var map = new Map();\n\n    return function cache(object) {\n        if (window.DEBUG && !warned && object === undefined) {\n            warned = true;\n            console.warn('cache() called with undefined. Not illegal, but potentially bad.');\n        }\n\n        if (window.DEBUG && arguments.length > 1) {\n            console.warn('cache() called with ' + arguments.length + ' arguments. Accepts exactly 1.');\n        }\n\n        if (map.has(object)) {\n            return map.get(object);\n        }\n\n        var value = fn(object);\n        map.set(object, value);\n        return value;\n    };\n}\n", "/**\ncurry(fn [, muteable, arity])\nReturns a function that wraps `fn` and makes it partially applicable.\n*/\n\nimport cache from './cache.js';\n\nconst A     = Array.prototype;\n\nfunction applyFn(fn, args) {\n    return typeof fn === 'function' ? fn.apply(null, args) : fn ;\n}\n\nfunction curry(fn, muteable, arity) {\n    arity = arity || fn.length;\n\n    var memo = arity === 1 ?\n        // Don't cache if `muteable` flag is true\n        muteable ? fn : cache(fn) :\n\n        // It's ok to always cache intermediate memos, though\n        cache(function(object) {\n            return curry(function() {\n                var args = [object];\n                args.push.apply(args, arguments);\n                return fn.apply(null, args);\n            }, muteable, arity - 1) ;\n        }) ;\n\n    return function partial(object) {\n        return arguments.length === 0 ?\n            partial :\n        arguments.length === 1 ?\n            memo(object) :\n        arguments.length >= arity ?\n            fn.apply(null, arguments) :\n        // This is bad, I think. We don't want [[fn],[fn]].map(get(0)) to be firing the fns\n        //arguments.length > arity ?\n        //    applyFn(fn.apply(null, A.splice.call(arguments, 0, arity)), arguments) :\n        applyFn(memo(object), A.slice.call(arguments, 1)) ;\n    };\n}\n\n//function curry(fn, muteable, arity) {\n//    arity = arity || fn.length;\n//    return function curried() {\n//        return arguments.length >= arity ?\n//            fn.apply(null, arguments) :\n//            curried.bind(null, ...arguments) ;\n//    };\n//}\n\nif (window.DEBUG) {\n    const _curry = curry;\n\n    // Feature test\n\tconst isFunctionLengthDefineable = (function() {\n\t\tvar fn = function() {};\n\n\t\ttry {\n\t\t\t// Can't do this on Safari - length non configurable :(\n\t\t\tObject.defineProperty(fn, 'length', { value: 2 });\n\t\t}\n\t\tcatch(e) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn fn.length === 2;\n\t})();\n\n    const setFunctionProperties = function setFunctionProperties(text, parity, fn1, fn2) {\n        // Make the string representation of fn2 display parameters of fn1\n        fn2.toString = function() {\n            return /function\\s*[\\w\\d]*\\s*\\([,\\w\\d\\s]*\\)/.exec(fn1.toString()) + ' { [' + text + '] }';\n        };\n\n        // Where possible, define length so that curried functions show how\n        // many arguments they are yet expecting\n        if (isFunctionLengthDefineable) {\n            Object.defineProperty(fn2, 'length', { value: parity });\n        }\n\n        return fn2;\n    };\n\n    // Make curried functions log a pretty version of their partials\n    curry = function curry(fn, muteable, arity) {\n        arity  = arity || fn.length;\n        return setFunctionProperties('curried', arity, fn, _curry(fn, muteable, arity));\n    };\n}\n\n\nexport default curry;\n", "\n/**\nexec(regex, fn, string)\nCalls `fn` with the result of `regex.exec(string)` if that result is not null,\nand returns the resulting value.\n**/\n\nimport curry from './curry.js';\n\nexport function exec(regex, fn, string) {\n    let data;\n\n    // If string looks like a regex result, get rest of string\n    // from latest index\n    if (typeof string !== 'string' && string.input !== undefined && string.index !== undefined) {\n        data = string;\n        string = data.input.slice(\n            string.index\n            + string[0].length\n            + (string.consumed || 0)\n        );\n    }\n\n    // Look for tokens\n    const tokens = regex.exec(string);\n    if (!tokens) { return; }\n\n    const output = fn(tokens);\n\n    // If we have a parent tokens object update its consumed count\n    if (data) {\n        data.consumed = (data.consumed || 0)\n            + tokens.index\n            + tokens[0].length\n            + (tokens.consumed || 0) ;\n    }\n\n    return output;\n}\n\nexport default curry(exec, true);\n", "\nimport curry from './curry.js';\nimport { exec } from './exec.js';\n\nfunction error(regex, reducers, string) {\n    if (string.input !== undefined && string.index !== undefined) {\n        string = string.input;\n    }\n\n    throw new Error('Cannot parse string \"' + (string.length > 128 ? string.length.slice(0, 128) + 'â€¦' : string) + '\"');\n}\n\nfunction reduce(reducers, acc, tokens) {\n    let n = -1;\n\n    while (++n < tokens.length) {\n        acc = (tokens[n] !== undefined && reducers[n]) ? reducers[n](acc, tokens) : acc ;\n    }\n\n    // Call the optional done fn\n    return reducers.done ? reducers.done(acc, tokens) :\n        // Support the old .close() name\n        reducers.close ? reducers.close(acc, tokens) :\n        // Return the result\n        acc ;\n}\n\n/**\ncapture(regex, reducers, accumulator, string)\nParse `string` with `regex`, calling functions in `reducers` to modify\nand return `accumulator`.\n\nReducers is an object of functions keyed by the index of their capturing\ngroup in the regexp result (`0` corresponding to the entire regex match,\nthe first capturing group being at index `1`). Reducer functions are\ncalled in capture order for all capturing groups that captured something.\nReducers may also define the function 'done', which is called at the end\nof every capture. All reducer functions are passed the paremeters\n`(accumulator, tokens)`, where `tokens` is the regexp result, and are expected\nto return a value that is passed as an accumulator to the next reducer function.\n\nReducers may also define a function `'catch'`, which is called when a match\nhas not been made (where `'catch'` is not defined an error is thrown).\n\n```js\nconst parseValue = capture(/^\\s*(-?\\d*\\.?\\d+)(\\w+)?\\s*$/, {\n    // Create a new accumulator object each call\n    0: () => ({}),\n\n    1: (acc, tokens) => {\n        acc.number = parseFloat(tokens[1]);\n        return acc;\n    },\n\n    2: (acc, tokens) => {\n        acc.unit = tokens[2];\n        return acc;\n    }\n}, null);\n\nconst value = parseValue('36rem');    // { number: 36, unit: 'rem' }\n```\n*/\n\nexport function capture(regex, reducers, acc, string) {\n    const output = exec(regex, (tokens) => reduce(reducers, acc, tokens), string);\n\n    // If tokens is undefined exec has failed to apply regex to string\n    return output === undefined ?\n        // If there is a catch function, call it, otherwise error out\n        reducers.catch ?\n            reducers.catch(acc, string) :\n            error(regex, reducers, string) :\n\n        // Return the accumulator\n        output ;\n}\n\nexport default curry(capture, true);\n", "/**\nid(value)\nReturns `value`.\n**/\n\nexport default function id(value) { return value; }\n", "/**\nnoop()\nDoes nothing, returns undefined.\n**/\n\nexport default function noop() {}\n", "/**\noverload(fn, object)\n\nReturns an overloaded.\n\nTakes a `fn` that returns a string key, and an `object` of key:function\npairs. The returned function calls `fn` with all arguments to get a key,\nthen calls the function at `object[key]` with all arguments.\n\nWhere `fn` returns `undefined`, `object.default` is called if it is defined\nin `object`, otherwise `overload` throws a 'no function defined for key' error.\n\n```\nvar handleEvent = overload(get('type'), {\n    click:   (e) => {...},\n    input:   (e) => {...},\n    default: (e) => {...}\n});\n```\n*/\n\n\nexport default function overload(fn, map) {\n    return function overload() {\n        const key     = fn.apply(this, arguments);\n        const handler = (map[key] || map.default);\n\n        if (!handler) {\n            throw new Error('overload() no function defined for key \"' + key + '\"');\n        }\n\n        return handler.apply(this, arguments);\n    };\n}\n", "/**\nassign(node, properties)\n\nAssigns each property of `properties` to `node`, as a property where that\nproperty exists in `node`, otherwise as an attribute.\n\nIf `properties` has a property `'children'` it must be an array of nodes;\nthey are appended to 'node'.\n\nThe property `'html'` is aliased to `'innerHTML'`. The property `'text'`\nis aliased to `'textContent'`. The property `'tag'` is treated as an alias\nof `'tagName'` (which is ignored, as `node.tagName` is read-only). The\nproperty `'is'` is also ignored.\n*/\n\nimport curry from 'fn/curry.js';\nimport id from 'fn/id.js';\nimport noop from 'fn/noop.js';\nimport overload from 'fn/overload.js';\n\nconst assignProperty = overload(id, {\n\t// Ignore read-only properties or attributes\n\tis: noop,\n\ttag: noop,\n\n\tdata: function(name, node, object) {\n\t\t// Strip undefined\n\t\tfor (name in object) {\n\t\t\tif (object[name] === undefined) {\n\t\t\t\tdelete object[name];\n\t\t\t}\n\t\t}\n\n\t\tObject.assign(node.dataset, object);\n\t},\n\n\tdataset: function(name, node, object) {\n        // Strip undefined\n        for (name in object) {\n            if (object[name] === undefined) {\n                delete object[name];\n            }\n        }\n\n\t\tObject.assign(node.dataset, object);\n\t},\n\n\thtml: function(name, node, content) {\n\t\tnode.innerHTML = content;\n\t},\n\n\ttext: function(name, node, content) {\n\t\tnode.textContent = content;\n\t},\n\n\tstyle: overload((name, node, content) => typeof content, {\n\t\tstring: (name, node, content) => node.style = content,\n\t\tobject: (name, node, content) => Object.assign(node.style, content)\n\t}),\n\n\tchildren: function(name, node, content) {\n\t\t// Empty the node and append children\n\t\tnode.innerHTML = '';\n\t\tnode.append.apply(node, content);\n\t},\n\n\t// SVG elements have a read-only properties, and must be set as string\n\t// attributes. Todo: explore the SVG property API to make these take\n\t// advantage of it\n    href: function(name, node, content) {\n        if (node instanceof SVGElement) {\n            node.setAttribute('href', content);\n        }\n        else {\n            node.href = content;\n        }\n    },\n\n\tpoints:    setAttribute,\n    cx:        setAttribute,\n    cy:        setAttribute,\n    r:         setAttribute,\n\tx:         setAttribute,\n\ty:         setAttribute,\n\tdx:        setAttribute,\n\tdy:        setAttribute,\n\ttransform: setAttribute,\n    preserveAspectRatio: setAttribute,\n    viewBox:   setAttribute,\n\n\tdefault: function(name, node, content) {\n\t\tif (name in node) {\n\t\t\tnode[name] = content;\n\t\t}\n\t\telse {\n\t\t\tnode.setAttribute(name, content);\n\t\t}\n\t}\n});\n\nfunction setAttribute(name, node, content) {\n\tnode.setAttribute(name, content);\n}\n\nexport function assign(node, attributes) {\n\tvar names = Object.keys(attributes);\n\tvar n = names.length;\n    while (n--) assignProperty(names[n], node, attributes[names[n]]);\n\treturn node;\n}\n\nexport default curry(assign, true);\n", "\nimport id       from 'fn/id.js';\nimport overload from 'fn/overload.js';\nimport assign   from './assign.js';\n\nconst svgNamespace = 'http://www.w3.org/2000/svg';\n\nconst template      = document.createElement('template');\nconst typeofContent = (type, content) => (content && typeof content);\n\n// Constructors\n\nfunction createContextFragment(context, html = '') {\n    const range = document.createRange();\n    range.selectNode(context);\n    return range.createContextualFragment(html);\n}\n\nconst createSVG = overload(typeofContent, {\n    string: function(tag, html) {\n        const node = document.createElementNS(svgNamespace, tag);\n        node.innerHTML = html;\n        return node;\n    },\n\n    object: function(tag, object) {\n        const node = document.createElementNS(svgNamespace, tag);\n\n        // Is it array-like?\n        if (typeof object.length === 'number') {\n            // Be careful here in case object is a live NodeList, which will\n            // mutate as you iterate over it. Applying object to .append()\n            // appears to not have this problem, and will work on arrays.\n            node.append.apply(node, object);\n        }\n        else {\n            assign(node, object);\n        }\n\n        return node;\n    },\n\n    default: (tag) => document.createElementNS(svgNamespace, tag)\n});\n\nconst createHTML = overload(typeofContent, {\n    string: function(tag, html) {\n        const node = document.createElement(tag);\n        node.innerHTML = html;\n        return node;\n    },\n\n    object: function(tag, object) {\n        const node = document.createElement(tag);\n\n        // Is it array-like?\n        if (typeof object.length === 'number') {\n            // Be careful here in case object is a live NodeList, which will\n            // mutate as you iterate over it. Applying object to .append()\n            // appears to not have this problem, and will work on arrays.\n            node.append.apply(node, object);\n        }\n        else {\n            assign(node, object);\n        }\n\n        return node;\n    },\n\n    default: (tag) => document.createElement(tag)\n});\n\n/**\ncreate(tag, content)\n\nConstructs and returns a new DOM node.\n\n- If `tag` is `\"text\"` a text node is created.\n- If `tag` is `\"fragment\"` a fragment is created.\n- If `tag` is `\"comment\"` a comment is created.\n- If `tag` is any other string the element `<tag></tag>` is created.\n\nWhere a comment or text node is created `content` must be a string, as is set as\ntextContent. For fragments and other nodes:\n\n- If `content` is a string it is set as innerHTML.\n- If `content` is array-like its items are appended to node. Note that where\n`content` is a NodeList, this removes nodes from whatever the NodeList belongs\nto.\n- If `content` is an object its properties are assigned as node properties or\nattributes.\n\n##### `create(tag, content, context)`\n\nWhere `tag` is `fragment` there is an optional third parameter `context`, which\nmust be an element. The fragment parser is run in the context of this element.\n\n```\ncreate('fragment', '<li>', create('ul'));\n```\n**/\n\nconst create = overload(id, {\n    comment: function(tag, text) {\n        return document.createComment(text || '');\n    },\n\n    fragment: overload(typeofContent, {\n        string: function(tag, html, context) {\n            if (context) {\n                return createContextFragment(context, html);\n            }\n\n            template.innerHTML = html;\n            return template.content.cloneNode(true);\n        },\n\n        object: function(tag, object, context) {\n            // If there is context, create a context-aware fragment\n            const fragment = context ?\n                createContextFragment(context) :\n                document.createDocumentFragment() ;\n\n            // Is object array-like?\n            if (typeof object.length === 'number') {\n                // Be careful here in case object is a live NodeList, which will\n                // mutate as you iterate over it. Applying object to .append()\n                // appears to not have this problem, and will work on arrays.\n                fragment.append.apply(fragment, object);\n            }\n            else {\n                assign(fragment, object);\n            }\n\n            return fragment;\n        },\n\n        default: () => document.createDocumentFragment()\n    }),\n\n    /*text: function (tag, text) {\n        return document.createTextNode(text || '');\n    },*/\n\n    circle:   createSVG,\n    ellipse:  createSVG,\n    g:        createSVG,\n    glyph:    createSVG,\n    image:    createSVG,\n    line:     createSVG,\n    rect:     createSVG,\n    use:      createSVG,\n    path:     createSVG,\n    pattern:  createSVG,\n    polygon:  createSVG,\n    polyline: createSVG,\n    svg:      createSVG,\n    tspan:    createSVG,\n    text:     createSVG,\n\n    default:  createHTML\n});\n\nexport default create;\n\n", "\n\nimport create from '../create.js';\n\nconst $internals = Symbol('internals');\n\n// TODO: No longer needed polyfill for Safari... ??\n/*\nfunction attachInternals(element) {\n    var internals;\n\n    // Use native attachInternals where it exists and we have the right to use\n    // it - you cannot attachInternals to customised built-ins\n    if (element.attachInternals && !element.getAttribute('is')) {\n        return element.attachInternals();\n        //if (internals.setFormValue) return internals;\n    }\n    else {\n        internals = {\n            shadowRoot: elem.shadowRoot\n        };\n    }\n\n    // Otherwise polyfill it with a pseudo internals object, actually a hidden\n    // input that we put inside element (but outside the shadow DOM). We may\n    // not yet put this in the DOM however â€“ it violates the spec to give a\n    // custom element children before it's contents are parsed. Instead we\n    // wait until connectCallback.\n    //internals.polyfillInput = create('input', { type: 'hidden', name: elem.name });\n    //elem.appendChild(internals.polyfillInput);\n    // Polyfill internals object setFormValue\n    //internals.setFormValue = function(value) {\n    //    this.input.value = value;\n    //};\n\n    return internals;\n}\n\nexport function createInternals(Element, element, shadow) {\n    return (element[$internals] = Element.formAssociated ?\n        attachInternals(element) :\n        { shadowRoot: shadow }\n    );\n}\n*/\n\nexport function createInternals(Element, element, shadow) {\n    return element[$internals] = (element.attachInternals && !element.getAttribute('is')) ?\n        element.attachInternals() :\n        { shadowRoot: shadow } ;\n}\n\nexport function getInternals(element) {\n    return element[$internals];\n}\n", "\n/**\nelement(tag, lifecycle, properties, stylesheet, message)\n\nRegisters a custom element `tag` and returns its constructor.\n\n- `tag`: A string in the form `'custom-name'`, `'<custom-name>'`,\n`'tag is=\"custom-name\"'` or `'<tag is=\"custom-name\">'`\n- `lifecycle`: `{\n    mode:       'open' or 'closed'\n    focusable:  true or false\n    shadow:     html string or '#template-id' or fragment\n\n    // Styleheet\n    stylesheet: optional string path to stylesheet for shadow DOM\n\n    // Lifecycle handlers\n    construct:  called during element construction\n    connect:    called when element added to DOM\n    load:       called when stylesheet loaded\n    disconnect: called when element removed from DOM\n\n    // Form elements\n    enable:     called when form element enabled\n    disable:    called when form element disabled\n    reset:      called when form element reset\n    restore:    called when form element restored\n}`\n- `properties`: `{\n    name: {\n        construct: fn called before lifecycle.construct\n        attribute: fn called on `element.setAttribute('name', ...)`\n        set:       fn called on setting property 'name'\n        get:       fn called on getting property 'name'\n    }\n}`\n- `stylesheet`: url of a stylesheet to load in to the shadow DOM\n- `message`: optional debug message to logged when element is registered\n\nThe name form `'tag is=\"element-name\"'` creates customised built-in elements in\nbrowsers that support the feature. Safari does not, but support is somewhat\npolyfilled. Mileage will vary.\n\n#### Lifecycle\n\nLifecycle handlers are called with the element as `this` and with the parameters\n`shadow` and `internals`.\n\nOn initialisation the `construct` handler is called. Set up the shadow root and\ndefine event handlers here. Children and attributes must not be inspected or\nassigned at this point: doing so will throw an error when constructed via\n`document.createElement()`.\n\nFollowing that, attribute handlers in `properties` are called for attributes\ndeclared in the HTML. The HTML parser normally calls these in source order.\n\nThen the `connect` handler is called when the element is placed in the DOM, or\nif it is already in the DOM and is being upgraded.\n\nBoth `load` and `slotchange` are asynchronous. Things get a little tricky here.\nThe order of `load` callbacks and `'slotchange'` listeners cannot be guaranteed\nin Safari. When there is an empty cache `slotchange` comes first, as it always\ndoes in other browsers, otherwise `load` happens first.\n\nWhere there is a stylesheet loading, most browsers call `'slotchange'` listeners\n(asynchronously) before `load` â€“ except Safari, where if the stylesheet is\nalready cached `load` is called before `'slotchange'` listeners. (TODO: I would\nlike to guarantee `slotchange` before `load`, but it is not clear how to delay\n`load`... if there is no slotted content, `slotchange` may not be called at\nall...)\n\nFinally, `connect` and `disconnect` are called whenever the element is inserted\ninto or removed from the DOM.\n\nThe effects of the `mode` option are subtle. In 'closed' mode, the element is\nnot given a publicly accessible `shadowRoot` property, and events that traverse\nthe shadow boundary are retargeted (as they are in 'open' mode) but also have\ntheir `path` list truncated.\n\n### Properties\n\nWhere the `properties` object contains a definition for a `value` property, work\nis done to give the element form field behaviour. The constructor is assigned\nthe property `formAssociated` which signals to the browser that it constructs\nform fields. Where they are not defined in `properties` the prototype is\nassigned default handlers for the standard properties `type`, `name`, `form`,\n`labels`, `validity`, `validationMessage`, `willValidate`, `checkValidity`\nand `reportValidity`. Form behaviour is also mildly polyfilled in browsers\nwithout support by inserting a hidden input inside the element but outside the\nshadow DOM. Mileage will vary. Managing focus can be problematic without browser\nsupport.\n*/\n\nimport capture  from 'fn/capture.js';\nimport id       from 'fn/id.js';\nimport noop     from 'fn/noop.js';\nimport overload from 'fn/overload.js';\nimport create   from './create.js';\nimport { createInternals, getInternals } from './element/internals.js';\n\n\nconst define         = Object.defineProperties;\nconst nothing        = {};\nconst constructors   = {};\nconst formProperties = {\n    // These properties echo those provided by native form controls. They are\n    // not strictly required, but provided for consistency with standard form\n    // elements.\n\n    //type: { value: 'text' },\n\n    name: {\n        set: function(name) { return this.setAttribute('name', name); },\n        get: function()     { return this.getAttribute('name') || ''; }\n    },\n\n    form:              { get:   function() { return getInternals(this).form; }},\n    labels:            { get:   function() { return getInternals(this).labels; }},\n    validity:          { get:   function() { return getInternals(this).validity; }},\n    validationMessage: { get:   function() { return getInternals(this).validationMessage; }},\n    willValidate:      { get:   function() { return getInternals(this).willValidate; }},\n    checkValidity:     { value: function() { return getInternals(this).checkValidity(); }},\n    reportValidity:    { value: function() { return getInternals(this).reportValidity(); }}\n};\n\n\nlet supportsCustomisedBuiltIn = false;\n\n\n// Capture name and tag from <element-name> or <tag is=\"element-name\">, syntax\n// brackets and quotes optional\nconst parseNameTag = capture(/^\\s*<?([a-z][\\w]*-[\\w-]+)>?\\s*$|^\\s*<?([a-z][\\w]*)\\s+is[=\\s]*[\"']?([a-z][\\w]*-[\\w-]+)[\"']?>?\\s*$/, {\n    1: (data, captures) => ({\n        name: captures[1]\n    }),\n\n    2: (data, captures) => ({\n        name: captures[3],\n        tag:  captures[2]\n    }),\n\n    catch: function(data, name) {\n        throw new SyntaxError('dom element() â€“ name must be of the form \\'element-name\\' or \\'tag is=\"element-name\"\\' (' + name + ')')\n    }\n}, null);\n\nconst onceEvent = { once: true };\n\nfunction toLoadPromise(element) {\n    return !!element.sheet ?\n        // Link has already loaded\n        Promise.resolve({ target: element }) :\n        // Wait for load\n        new Promise((resolve, reject) => {\n            element.addEventListener('load', resolve, onceEvent);\n            element.addEventListener('error', reject, onceEvent);\n        }) ;\n}\n\nfunction stop(object) {\n    object.stop();\n}\n\nfunction getElementConstructor(tag) {\n    if (constructors[tag]) return constructors[tag];\n\n    const constructor = document.createElement(tag).constructor;\n    if (constructor === HTMLUnknownElement) {\n        throw new Error('Cannot define customised built-in - constructor for <' + tag + '> is HTMLUnknownElement');\n    }\n\n    return constructors[tag] = constructor;\n}\n\nfunction transferProperty(element, key) {\n    if (element.hasOwnProperty(key)) {\n        const value = element[key];\n        delete element[key];\n        element[key] = value;\n    }\n    return element;\n}\n\nfunction createShadow(elem, options) {\n    // Create a shadow root. Shadows may be 'open' or 'closed'. Closed shadows\n    // are not exposed via element.shadowRoot, and events propagating from\n    // inside of them report the element as target. Default to 'closed'.\n    const shadow = elem.attachShadow({\n        mode:           options.mode || 'closed',\n        delegatesFocus: options.focusable || false\n    });\n\n    if (options.stylesheet) {\n        const link = create('link', { rel: 'stylesheet', href: options.stylesheet });\n        shadow.append(link);\n    }\n\n    return shadow;\n}\n\nfunction fillShadowFromTemplate(shadow, template) {\n    // It's a string\n    if (typeof template === 'string') {\n        // It's an id of a template\n        if (template[0] === '#') {\n            shadow.appendChild(\n                document.getElementById(template.slice(1))\n                .content.clone(true)\n            );\n        }\n        // It's html\n        else {\n            shadow.innerHTML = template;\n        }\n    }\n    // It's a <template>\n    else {\n        shadow.appendChild(template.content.clone(true));\n    }\n\n    return shadow;\n}\n\nfunction isNotUpgraded(element) {\n    /* Detect marked as upgraded, mark if not */\n    const upgraded = element.isUpgraded;\n    element.isUpgraded = true;\n    return !upgraded;\n}\n\nfunction findByIs(root, name) {\n    return Array\n    .from(root.querySelectorAll('[is=\"' + name + '\"]'))\n    .filter(isNotUpgraded);\n}\n\nconst createDescriptor = overload((name, options) => typeof options, {\n    object:   (name, descriptor) => descriptor,\n    function: (name, fn) => ({ value: fn }),\n    default:  (name, options) => {\n        throw new TypeError('element() does not accept property descriptor of type ' + typeof options);\n    }\n});\n\nexport default function element(definition, lifecycle = {}, properties = {}, log = '') {\n    const { name, tag } = parseNameTag(definition);\n\n    // Get the element constructor or the base HTMLElement constructor\n    const constructor = typeof tag === 'string' ?\n        getElementConstructor(tag) :\n        HTMLElement ;\n\n    // Split properties into attributes and property descriptors\n    const attributes  = [];\n    const descriptors = {};\n\n    let propname, descriptor;\n    for (propname in properties) {\n        descriptor = createDescriptor(propname, properties[propname]);\n\n        // Add name to list of observed attributes\n        if (descriptor.attribute) attributes.push(propname);\n\n        // Add descriptor to properties to be defined\n        if (descriptor.set || descriptor.get || 'value' in descriptor) descriptors[propname] = descriptor;\n\n        // Override property descriptor\n        properties[propname] = descriptor;\n    }\n\n    // Declare constructor\n    function Element() {\n        // Construct an instance from Constructor using Element prototype\n        const element = Reflect.construct(constructor, arguments, Element);\n\n        // Make shadow if mode or shadow have been set\n        const shadow = (lifecycle.mode || (typeof lifecycle.shadow === 'string')) ?\n            createShadow(element, lifecycle) :\n            undefined ;\n\n        // Fill shadow with template\n        if (lifecycle.shadow) fillShadowFromTemplate(shadow, lifecycle.shadow);\n\n        // Get access to the internals object. If form associated, internals is\n        // the form control API internals object. We're gonna be rude and\n        // extend it.\n        const internals = createInternals(Element, element, shadow);\n\n        // Flag support for custom built-ins. We know this when tag exists and\n        // Element constructor is called\n        if (tag) supportsCustomisedBuiltIn = true;\n        if (lifecycle.construct) lifecycle.construct.call(element, shadow, internals);\n\n        // At this point, if properties have been set before the element was\n        // upgraded they already exist on the element itself, where we have\n        // just upgraded it's protytype to define those properties. Those\n        // definitions will never be reached. Either:\n        //\n        // 1. Define properties on the instance instead of the prototype, as in\n        //    Object.defineProperties(element, descriptors) here in the\n        //    constructor. Won't actually solve the problem.\n        //\n        // 2. Take a great deal of care when authoring not to set properties\n        //    before an element is upgraded. We can't impose a restriction like\n        //    that on Joe Bloggs front end developer.\n        //\n        // 3. Copy defined properties to their prototype handlers and delete\n        //    them on the instance.\n        //\n        // Let's go with 3. I'm not happy we have to do this, though.\n        Object.keys(descriptors).reduce(transferProperty, element);\n\n        return element;\n    }\n\n    // Set prototype and define properties\n    Element.prototype = Object.create(constructor.prototype, descriptors);\n\n    // Prefetch stylesheet ??\n    /*if (stylesheet) {\n        toPrefetchPromise(stylesheet);\n        log = window.DEBUG ?\n            log + ' â€“ stylesheet ' + stylesheet :\n            log ;\n    }*/\n\n    if (properties.value) {\n        // Flag the Element class as formAssociated\n        Element.formAssociated = true;\n\n        // Define standard form properties\n        define(Element.prototype, formProperties);\n\n        if (lifecycle.enable || lifecycle.disable) {\n            Element.prototype.formDisabledCallback = function(disabled) {\n                const internals = getInternals(this);\n                return disabled ?\n                    lifecycle.disable && lifecycle.disable.call(this, internals.shadowRoot, internals) :\n                    lifecycle.enable && lifecycle.enable.call(this, internals.shadowRoot, internals) ;\n            };\n        }\n\n        if (lifecycle.reset) {\n            Element.prototype.formResetCallback = function() {\n                const internals = getInternals(this);\n                return lifecycle.reset.call(this, internals.shadowRoot, internals);\n            };\n        }\n\n        if (lifecycle.restore) {\n            Element.prototype.formStateRestoreCallback = function() {\n                const internals = getInternals(this);\n                return lifecycle.restore.call(this, internals.shadowRoot, internals);\n            };\n        }\n    }\n\n    // Attributes\n    if (attributes.length) {\n        Element.observedAttributes = attributes;\n        Element.prototype.attributeChangedCallback = function(name, old, value) {\n            return properties[name].attribute.call(this, value) ;\n        };\n    }\n\n    // Lifecycle\n    if (lifecycle.connect) {\n        Element.prototype.connectedCallback = function() {\n            const internals = getInternals(this);\n            const shadow    = internals.shadowRoot;\n\n            // Connect\n            internals.stopable = lifecycle.connect.call(this, shadow, internals);\n\n            // Avoid flash of unstyled content in shadow DOMs that must load assets.\n            // Now, it's debatable whether this code should be here or in the constructor.\n            // Whether links in the shadow may have already emitted load events by connect\n            // time. They'd have to have done it synchronously, so I don't think so.\n            if (!shadow) return;\n\n            const links = shadow.querySelectorAll('link[rel=\"stylesheet\"]');\n\n            if (links.length) {\n                // Hide all content other than the default slot until stylesheets\n                // have loaded. We keep the default slot visible as that content\n                // was visible before upgrade and we do not want it to momentarily\n                // disappear.\n                const style = create('style', '*:not(slot), slot:not([name]) { display: none !important; }');\n                shadow.prepend(style);\n\n                let promise;\n                if (!internals.loadPromise) {\n                    // Wait for stylesheets to load\n                    promise = internals.loadPromise = Promise.all(Array.from(links, toLoadPromise));\n                }\n                else {\n                    // Insert an animation frame to avoid flash on reconnect\n                    promise = internals.loadPromise.then(() => new Promise(requestAnimationFrame));\n                }\n\n                promise.finally(() => {\n                    if (window.DEBUG) window.console.log('%c<' + (tag ? tag + ' is=' + name + '' : name) + '>%c load \\n' + Array.from(links).map((link) => link.href.replace(/https?:\\/\\//, '')).join('\\n'), 'color:#3a8ab0;font-weight:400;', 'color:#888888;font-weight:400;');\n                    // Remove hide style\n                    style.remove();\n                    // and call the load() callback\n                    if (lifecycle.load) lifecycle.load.call(this, shadow, internals);\n                });\n            }\n            else if (lifecycle.load) {\n                lifecycle.load.call(this, shadow, internals);\n            }\n        }\n    }\n\n    Element.prototype.disconnectedCallback = function() {\n        const internals = getInternals(this);\n        if (internals.stopable) {\n            // Support a stopable...\n            if (internals.stopable.stop) { internals.stopable.stop(); }\n            // or an array of stopables\n            else { internals.stopable.forEach(stop); }\n        }\n        if (lifecycle.disconnect) lifecycle.disconnect.call(this, internals.shadowRoot, internals);\n    };\n\n    // Log registration to console\n    window.console &&\n    window.console.log('%c<' + (tag ? tag + ' is=' + name + '' : name) + '>%c ' + log, 'color:#3a8ab0;font-weight:600;', 'color:#888888;font-weight:400;');\n\n    // Define the element\n    window.customElements.define(name, Element, tag && { extends: tag });\n\n\n    // Safari partial polyfill.\n    // Where tag is supplied, element should have been registered as a customised\n    // built-in and the constructor would have run if any were in the DOM already.\n    // However, Safari does not support customised built-ins. Here we attempt to\n    // go some way towards filling in support by searching for elements and\n    // assigning their intended APIs to them.\n    if (tag && !supportsCustomisedBuiltIn) {\n        // It may be there were none in the DOM, in which case we must run a\n        // test. Not ideal.\n        const div = document.createElement('div');\n        div.style.position = 'fixed';\n        div.style.left = '-1000px';\n        div.style.top  = '-1000px';\n        div.innerHTML = '<' + tag + ' is=\"' + name + '\"></' + tag + '>';\n        document.body.append(div);\n        div.remove();\n\n        if (!supportsCustomisedBuiltIn) {\n            if (window.DEBUG) {\n                console.warn('Browser does not support customised built-in elements, polyfilling <' + tag + ' is=\"' + name + '\">');\n            }\n\n            function upgrade(element) {\n                // Store values of properties we are about to define\n                const store = {};\n                Object.keys(descriptors).forEach((key) => {\n                    if (element[key] !== undefined) store[key] = element[key];\n                });\n\n                // Define properties on element\n                define(element, descriptors);\n\n                // Construct an instance from Constructor using the Element prototype\n                const shadow = lifecycle.mode || lifecycle.shadow ?\n                    createShadow(element, lifecycle) :\n                    undefined ;\n\n                // Get access to the internals object\n                const internals = createInternals(Element, element, shadow);\n\n                // Run constructor\n                lifecycle.construct && lifecycle.construct.call(element, shadow, internals);\n\n                if (window.DEBUG) {\n                    // Assign stored properties back onto element\n                    try {\n                        Object.assign(element, store);\n                    }\n                    catch(e) {\n                        console.warn(e.message, tag, Object.keys(store));\n                    }\n                }\n                else {\n                    Object.assign(element, store);\n                }\n\n                // Detect and run attributes\n                let n = -1, name;\n                while (name = attributes[++n]) {\n                    // elements.attributes is sometimes undefined... why?\n                    const attribute = element.attributes[name];\n                    if (attribute) properties[name].attribute.call(element, attribute.value);\n                }\n\n                // Run connected callback\n                lifecycle.connect && lifecycle.connect.call(element, shadow, internals);\n            }\n\n            function polyfillByRoot(root) {\n                findByIs(root, name).forEach(upgrade)\n                const observer = new MutationObserver(() => findByIs(root, name).forEach(upgrade));\n                observer.observe(root, { childList: true, subtree: true });\n            }\n\n            // Expose on element for use in shadow DOMs\n            Element.polyfillByRoot = polyfillByRoot;\n\n            // Run on document automatically\n            polyfillByRoot(document);\n        }\n        else {\n            Element.polyfillByRoot = noop;\n        }\n    }\n    else {\n        Element.polyfillByRoot = noop;\n    }\n\n    return Element;\n}\n\nexport { getInternals };\n", "\n/**\nequals(a, b)\nCompares `a` and `b` for deep equality and returns `true` where they are equal,\notherwise false.\n**/\n\nimport curry from './curry.js';\n\nexport function equals(a, b) {\n    // Fast out if references are for the same object\n    if (a === b) { return true; }\n\n    // If either of the values is null, or not an object, we already know\n    // they're not equal so get out of here\n    if (a === null ||\n        b === null ||\n        typeof a !== 'object' ||\n        typeof b !== 'object') {\n        return false;\n    }\n\n    // Compare their enumerable keys\n    const akeys = Object.keys(a);\n    const bkeys = Object.keys(b);\n\n    let n = akeys.length;\n    while (n--) {\n        // Has the property been set to undefined on a?\n        if (a[akeys[n]] === undefined) {\n            // We don't want to test if it is an own property of b, as\n            // undefined represents an absence of value\n            if (b[akeys[n]] !== undefined) {\n                return false;\n            }\n        }\n        else {\n            // console.log(equals(a[akeys[n]], b[akeys[n]]), akeys[n], a[akeys[n]], b[akeys[n]]);\n            if (!b.hasOwnProperty(akeys[n]) || !equals(a[akeys[n]], b[akeys[n]])) {\n                return false;\n            }\n        }\n\n        const i = bkeys.indexOf(akeys[n]);\n        if (i > -1) {\n            bkeys.splice(i, 1);\n        }\n    }\n\n    n = bkeys.length;\n    while (n--) {\n        // Has the property been set to undefined on b?\n        if (b[bkeys[n]] === undefined) {\n            if (a[bkeys[n]] !== undefined) {\n                return false;\n            }\n        }\n        else {\n            // We already know a does not have own property bkeys[n], because\n            // we have already been through all the enumerable properties\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport default curry(equals, true);\n", "\n/**\nget(name, object)\nGet property `name` of `object`.\n*/\n\nimport curry from './curry.js';\n\nexport function get(key, object) {\n    // Todo? Support WeakMaps and Maps and other map-like objects with a\n    // get method - but not by detecting the get method\n    return object[key];\n}\n\nexport default curry(get, true);\n", "/**\narg(n)\n\nReturns a function that returns `argument[n]`.\n\n```js\n```\n**/\n\nexport default function arg(n) {\n    return function arg() {\n        return arguments[n];\n    };\n}\n", "/**\nself()\nReturns `this`.\n*/\n\nexport default function self() { return this; }\n", "\n/**\nnothing\nA frozen array-like and stream-like object that contains no value.\n**/\n\nimport arg  from './arg.js';\nimport id   from './id.js';\nimport noop from './noop.js';\nimport self from './self.js';\n\nconst create = Object.create;\nconst freeze = Object.freeze;\n\nexport default freeze(create(create(Object.prototype, {\n    // Array methods\n    at:        { value: noop },\n    shift:     { value: noop },\n    push:      { value: noop },\n    forEach:   { value: noop },\n    join:      { value: function() { return ''; } },\n    every:     { value: function() { return true; } },\n    filter:    { value: self },\n    find:      { value: noop },\n    findIndex: { value: function() { return -1; } },\n    flat:      { value: self },\n    flatMap:   { value: self },\n    includes:  { value: function() { return false; } },\n    indexOf:   { value: function() { return -1; } },\n    map:       { value: self },\n    reduce:    { value: arg(1) },\n    sort:      { value: self },\n\n   // Stream methods\n    each:      { value: self },\n    pipe:      { value: id },\n    start:     { value: self },\n    stop:      { value: self },\n    done:      { value: self },\n\n    // Primitive coercion\n    valueOf:   { value: function() { return null; } }\n}), {\n    length: { value: 0 }\n}));\n", "/**\ntoType(object)\nReturns `typeof object`.\n*/\n\nexport default (object) => typeof object;\n", "\nimport id       from '../id.js';\nimport overload from '../overload.js';\nimport toType   from '../to-type.js';\n\n\nconst define = Object.defineProperties;\nconst call = overload(toType, {\n    function: (fn) => fn(),\n    object:   (object) => object.stop()\n});\n\n\n/** Stopable() **/\n\nexport default class Stopable extends id {\n    #stopables;\n\n    /**\n    .stop()\n    Stops the stream, passing any parameters up to the head of the stream. The\n    head determines whether the stream stops immediately or asynchronously.\n    **/\n    stop() {\n        // Check we are not already done\n        if (this.status === 'done') return this;\n\n        // Set status\n        this.status = 'done';\n\n        // Call done functions and stopables\n        const stopables = this.#stopables;\n        this.#stopables = undefined;\n        if (stopables) stopables.forEach(call);\n\n        // Make it chain-able\n        return this;\n    }\n\n    /**\n    .done(fn)\n    Cues `fn` to be called when the stream is stopped. If `fn` is an object, it\n    must have a `.stop()` method, which is called when this is stopped.\n    **/\n    done(fn) {\n        // Is stream already stopped? Call listener immediately.\n        if (this.status === 'done') {\n            call(listener);\n            return this;\n        }\n\n        // Add to done handlers\n        const stopables = this.#stopables || (this.#stopables = []);\n        stopables.push(fn);\n\n        // Make it chain-able\n        return this;\n    }\n}\n\ndefine(Stopable.prototype, {\n    status: { writable: true }\n});\n", "\nimport noop       from '../noop.js';\nimport overload   from '../overload.js';\nimport toType     from '../to-type.js';\nimport Stopable   from './stopable.js';\n\n\nconst assign = Object.assign;\nconst create = Object.create;\n\n\nfunction throwTypeError(source) {\n    throw new TypeError('Stream cannot be created .from() ' + typeof source);\n}\n\nfunction push(stream, value) {\n    if (value === undefined) return;\n    let n = -1;\n    while (stream[++n]) stream[n].push(value);\n    return stream;\n}\n\nfunction stop(stream) {\n    // Call done functions and listeners\n    Stopable.prototype.stop.apply(stream);\n\n    // Loop through outputs, propagate stop() down the pipe\n    let o = -1, output;\n    while (output = stream[++o]) {\n        // Remove output from stream\n        stream[o] = undefined;\n        // If output is not stop-able it never got stream as an input\n        if (!output.stop) continue;\n        // Remove stream from output's inputs\n        removeInput(output, stream);\n        // If output has no inputs left, stop it\n        if (!output[-1]) output.stop();\n    }\n\n    return stream;\n}\n\nfunction removeInput(stream, input) {\n    // Remove input from stream\n    let i = 0;\n    while (stream[--i] && stream[i] !== input);\n    while (stream[i--]) stream[i + 1] = stream[i];\n}\n\nfunction removeOutput(stream, output) {\n    // Remove output from stream\n    let o = -1;\n    while (stream[++o] && stream[o] !== output);\n    while (stream[o++]) stream[o - 1] = stream[o];\n}\n\nfunction unpipe(output, input) {\n    // Remove link between streams without stopping them\n    removeInput(input, output);\n    removeOutput(output, input);\n}\n\n\n/* Consumer() */\n\nexport class Consumer extends Stopable {\n    /**\n    .stop()\n    Stops the stream.\n    **/\n    stop() {\n        if (this.status === 'done') return this;\n\n        // Loop through inputs, notify them we are detaching\n        let input;\n        while (input = this[-1]) {\n            // Remove input from this\n            let i = -1;\n            while (this[i--]) this[i + 1] = this[i];\n\n            // Remove this from input's outputs\n            removeOutput(input, this);\n\n            // If input is stop-able and has no other outputs, stop it\n            if (input.stop && !input[0]) input.stop(input);\n        }\n\n        // Set status and call done(fn) handlers\n        return super.stop();\n    }\n}\n\n\n/* Each(fn) */\n\nclass Each extends Consumer {\n    constructor(fn) {\n        super();\n        this.push = fn;\n    }\n}\n\n\n/* Reduce() */\n\nclass Reduce extends Consumer {\n    constructor(fn, accumulator) {\n        super();\n        this.fn    = fn;\n        this.value = accumulator;\n        this.i     = 0;\n    }\n\n    push(value) {\n        const fn = this.fn;\n        this.value = fn(this.value, value, this.i++, this);\n    }\n}\n\n\n/**\nStream(start)\nCreates a stream from a `start` function, called when a consumer is first\nattached, with two arguments, `start(push, stop)`. `push(value)` is called to\nwrite `value` to the stream and `stop()` is called to stop the stream.\n**/\n\nexport default class Stream extends Consumer {\n    /**\n    .start()\n    **/\n    start() {\n        // If this is 'running' or 'done' we need do nothing here\n        if (this.status) return this;\n\n        // Loop through inputs\n        let i = 0, input;\n        inputloop: while (input = this[--i]) {\n            // Loop through input's outputs\n            let o = -1;\n            // If input already has this as an output skip set up\n            while (input[++o]) if (input[o] === this) continue inputloop;\n            // Set this as input's output\n            input[o] = this;\n            // If input is start-able and this is its first consumer, start it,\n            // otherwise assume it is running\n            if (o === 0 && input.start) input.start();\n        }\n\n        return this;\n    }\n\n    stop() {\n        if (this.status === 'done') return this;\n\n        super.stop();\n\n        // Loop through outputs, propagate stop() down the pipe\n        let o = -1, output;\n        while (output = this[++o]) {\n            // Remove output from this\n            this[o] = undefined;\n            // If output is not stop-able it never got this as an input\n            if (!output.stop) continue;\n            // Remove this from output's inputs\n            removeInput(output, this);\n            // If output has no inputs left, stop it\n            if (!output[-1]) output.stop();\n        }\n\n        return this;\n    }\n\n    /**\n    .pipe(stream)\n    Sets up this stream to pipe values into `stream` when started. Starts\n    immediately where `stream` is already running. Returns `stream`.\n    **/\n    pipe(output) {\n        // If output is stop-able set this as its input\n        if (output.stop) {\n            // Guard against this piping twice to output\n            let i = 0;\n            while (output[--i]) if (output[i] === this) break;\n            output[i] = this;\n        }\n\n        // If output is start-able and is not already running wait to start this\n        if (output.start && !(output[0] || output.status === 'running')) {\n            return output;\n        }\n\n        // Start piping right away\n        let o = -1;\n        while (this[++o]) if (this[o] === output) break;\n        this[o] = output;\n        // If output is the first consumer to be added start this\n        if (!o) this.start();\n\n        // Return output\n        return output;\n    }\n\n    /**\n    .each(fn)\n    Consumes the stream, calling `fn(value)` for each piped value. Returns the\n    stream.\n    **/\n    each(fn) {\n        // Start the Consumer immediately\n        return this.pipe(new Each(fn));\n    }\n\n    /**\n    .buffer(...values)\n    Inserts a buffer of values into the start of a stream. Although the buffer\n    is not hot, before it is started .push() may be used to add values to the\n    buffer.\n    **/\n    buffer(...values) {\n        return this.pipe(new BufferStream(values));\n    }\n\n    /**\n    .filter(fn)\n    Filters out values where `fn(value)` is falsy.\n    **/\n    filter(fn) {\n        return this.pipe(new Filter(fn));\n    }\n\n    /**\n    .flatMap(fn)\n    **/\n    flatMap(fn) {\n        return this.pipe(new FlatMap(fn));\n    }\n\n    /**\n    .map(fn)\n    Maps each value in a stream to `fn(value)` and pipes non-`undefined` results\n    downstream.\n    **/\n    map(fn) {\n        return this.pipe(new Map(fn));\n    }\n\n    /**\n    .reduce(fn, initial)\n    Consume the stream, calling `fn(accumulator, value)` for each value in it.\n    Returns the accumulator.\n    **/\n    reduce(fn, accumulator) {\n        return this.pipe(new Reduce(fn, accumulator)).start().value;\n    }\n\n    /**\n    .scan(fn, initial)\n    Calls `fn(current, value)` for each `value` in the stream. Where `fn`\n    returns a value it is pushed downstream, and `current` assumes that value\n    on the next iteration. Where `fn` returns `undefined` nothing is pushed and\n    `current` remains unchanged.\n    **/\n    scan(fn, initial) {\n        return this.pipe(new Scan(fn, initial));\n    }\n\n    /**\n    .slice(n, m)\n    Returns a stream of the nth to mth values of stream.\n    **/\n    slice(n, m) {\n        return this.pipe(new Slice(n, m));\n    }\n\n    /**\n    .split(n)\n    **/\n    split(n) {\n        return this.pipe(new Split(n));\n    }\n\n    /* Experimental async iterator support for `for await (x of stream)`\n       loops. */\n    [Symbol.asyncIterator] = async function*() {\n        // Buffer for synchronous values\n        const values = [];\n        let push = (value) => values.push(value);\n\n        function setResolve(res, rej) {\n            push = res;\n        }\n\n        this\n        .each((value) => push(value))\n        .done(() => push = noop);\n\n        while (push !== noop) {\n            yield values.length ?\n                // Yield collected synchronous value\n                values.shift() :\n                // Yield next asynchronous value\n                await new Promise(setResolve) ;\n        }\n    }\n\n    static from = overload(toType, {\n        /**\n        Stream.from(fn)\n        Create a pushable map stream from function `fn`.\n        **/\n        function: (fn) => new Map(fn),\n\n        object: (object) =>\n            /**\n            Stream.from(stream)\n            Treat a pipe-able as a stream directly.\n            **/\n            typeof object.pipe === 'function' ? object :\n\n            /**\n            Stream.from(promise)\n            Create a read-only stream from a promise. The stream is stopped when\n            the promise resolves or rejects.\n            **/\n            typeof object.then === 'function' ? new PromiseStream(object) :\n\n            /**\n            Stream.from(array)\n            Create a pushable buffer stream from an array or array-like object.\n            **/\n            typeof object.length === 'number' ? new BufferStream(Array.from(object)) :\n\n            // object cannot be made into stream\n            throwTypeError(object)\n    });\n\n    /**\n    Stream.of(...values)\n    Create a pushable value or buffer stream from parameter values.\n    **/\n    static of(...values) {\n        return values.length < 2 ?\n            new Value(values[0]) :\n            new BufferStream(values) ;\n    }\n\n    /**\n    Stream.buffer(...values)\n    Create a pushable buffer stream with initial buffer of arguments.\n    **/\n    static buffer(values) {\n        return new BufferStream(values);\n    }\n\n    /**\n    Stream.value(value)\n    Create a pushable value stream with initial `value`.\n    **/\n    static value(value) {\n        return new Value(value);\n    }\n\n    /**\n    Stream.merge(stream1, stream2, ...)\n    Creates a stream by merging values from any number of input streams into a\n    single output stream. Values are emitted in the time order they are received\n    from inputs.\n\n    ```js\n    Stream.merge(stream1, stream2).each((value) => {\n        // value is from stream1 or stream 2\n    });\n    ```\n    **/\n    static merge(...inputs) {\n        return new Merge(inputs);\n    }\n\n    /**\n    Stream.push(stream, value)\n    Pushes `value` to `stream`'s outputs (even on streams that have no `.push()`\n    method). For use in sub-classing Stream.\n    **/\n    static push = push;\n\n    /**\n    Stream.stop(stream)\n    Stops stream, calling `.done()` handlers, setting status to `'done'` and\n    stopping dependent streams. For internal use when sub-classing Stream.\n    **/\n    static stop = stop;\n\n    /*\n    Stream.input(stream, output)\n    Remove output stream from `stream` and vice-versa, without stopping either\n    stream. Normally `stream.stop()` should be used to stop the flow of a pipe -\n    this function is used when making dynamic graphs of streams that need to\n    stay alive.\n    */\n    static unpipe = unpipe;\n\n    static each(fn) {\n        return new Each(fn);\n    }\n\n    static reduce(fn, accumulator) {\n        return new Reduce(fn, accumulator);\n    }\n}\n\n\n/**\nPromiseStream(promise)\n**/\n\nclass PromiseStream extends Stream {\n    constructor(promise) {\n        super();\n        this.promise = promise;\n    }\n\n    start() {\n        this.promise\n        .then((value) => push(this, value))\n        .finally(() => this.stop());\n        return this;\n    }\n}\n\n\n/*\nValue(value)\nA Value stream represents a persistent value. Streams piped from a value stream\nare given its current value. A Value stream may be pushed to before it is piped.\n*/\n\nclass Value extends Stream {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n\n    start() {\n        if (this.value !== undefined) {\n            push(this, this.value);\n            // If stream was stopped as a result of a push, don't continue pushing\n            if (this.status === 'done') return this;\n        }\n\n        // Start streams that are piped to this buffer stream\n        return super.start();\n    }\n\n    push(value) {\n        this.value = value;\n        return push(this, value);\n    }\n}\n\n\n/*\nBufferStream(values)\nA BufferStream may be pushed to before it is piped, as it starts life with an\narray buffer of values.\n*/\n\nclass BufferStream extends Stream {\n    constructor(values) {\n        super();\n        this.values = values || [];\n    }\n\n    start() {\n        const values = this.values;\n        if (!values) return super.start();\n\n        // Loop over values\n        let n = -1;\n        while(n++ < values.length) {\n            // Push values to stream\n            push(this, values[n]);\n            // If stream was stopped as a result of a push, don't continue pushing\n            if (this.status === 'done') return this;\n        }\n\n        // Throw away values buffer\n        this.values = undefined;\n\n        // Start streams that are piped to this buffer stream\n        return super.start();\n    }\n\n    push(value) {\n        this.value = value;\n        return this.values ?\n            this.values.push(this.value) :\n            push(this, this.value) ;\n    }\n}\n\n\n/* Filter() */\n\nclass Filter extends Stream {\n    constructor(fn) {\n        super();\n        this.fn = fn;\n    }\n\n    push(value) {\n        const fn = this.fn;\n        return fn(value) && push(this, value);\n    }\n}\n\n\n/* FlatMap() */\n\nclass FlatMap extends Stream {\n    constructor(fn) {\n        super();\n        this.fn = fn;\n    }\n\n    push(value) {\n        const fn     = this.fn;\n        const values = fn(value);\n\n        if (values === undefined) { return; }\n\n        // Flatten array or array-like\n        if (isIterable(values)) {\n            for (const value of values) {\n                push(this, value);\n            }\n        }\n        // Flatten stream\n        else if (values.pipe) {\n            console.warn('FlatMapping pipeables is dodgy. Map to arrays for the moment please.');\n            // Todo: support flattening of streams. This method is crude -\n            // it does not preserve order, for one thing. Should streams be\n            // made iterable? CAN streams be made iterable? They'd have to\n            // be async...\n            this.done(values.each((value) => push(this, value)));\n            // This causes problems if you try\n            // stream.scan(...).flatMap(...)\n            //values.pipe(this[0]);\n        }\n        // Flatten promise\n        else if (values.then) {\n            values.then((value) => push(this, value));\n        }\n    }\n}\n\n\n/* Map() */\n\nclass Map extends Stream {\n    constructor(fn) {\n        super();\n        this.fn = fn;\n    }\n\n    push(value) {\n        const fn     = this.fn;\n        const result = fn(value);\n        // Reject undefined\n        return result !== undefined && push(this, result);\n    }\n}\n\n\n/*\nMerge()\n*/\n\nclass Merge extends Stream {\n    constructor(inputs) {\n        super();\n        this.inputs = inputs;\n    }\n\n    push(value) {\n        return push(this, value);\n    }\n\n    pipe(output) {\n        let n = -1, input;\n        while (input = this.inputs[++n]) Stream.from(input).pipe(this);\n        return Stream.prototype.pipe.call(this, output)\n    }\n}\n\n\n/* Scan() */\n\nclass Scan extends Stream {\n    constructor(fn, accumulator) {\n        super();\n        this.fn    = fn;\n        this.value = accumulator;\n    }\n\n    push(value) {\n        const fn = this.fn;\n        this.value = fn(this.value, value);\n        push(this, this.value);\n    }\n}\n\n\n/* Slice() */\n\nclass Slice extends Stream {\n    constructor(n, m = Infinity) {\n        if (window.DEBUG && (typeof n !== 'number' || n < 0)) {\n            throw new Error('Stream: .slice() requires a positive integer (' + n + ')');\n        }\n\n        if (window.DEBUG && (typeof m !== 'number' || m < 1)) {\n            throw new Error('Stream: .slice() requires a non-zero positive integer (n, ' + n + ')');\n        }\n\n        super();\n        this.index = -n;\n        this.indexEnd = m - n;\n    }\n\n    push(value) {\n        if (++this.index > 0) push(this, value);\n        if (this.index === this.indexEnd) this.stop();\n    }\n}\n\n\n/* Split(input, fn) */\n\nclass Split extends Stream {\n    constructor(fn) {\n        super();\n        this.chunk = [];\n\n        if (typeof fn === 'number') this.n = fn;\n        else this.fn = fn;\n    }\n\n    fn() {\n        return this.chunk.length === this.n;\n    }\n\n    push(value) {\n        const chunk = this.chunk;\n\n        if (this.fn(value)) {\n            // Emit complete chunk and create a new chunk\n            push(this, chunk);\n            this.chunk = [];\n        }\n        else {\n            // Push to existing chunk\n            chunk.push(value);\n        }\n    }\n}\n", "\n\n/**\nCombine(object, options)\nCreates a stream of objects containing the latest values of all streams and\npromises in `object`, as soon as they become active or resolved.\n\n```js\nnew Combine({ a: stream, b: promise }).each((object) => {\n    // object.a and object.b are values\n});\n```\n\nIf `object` contains properties that are not streams or promises, those are\nalso set on streamed objects.\n\n```js\nnew Combine({ a: stream, b: promise, c: 5 }).each((object) => {\n    // object.c is 5\n});\n```\n\nOutput objects are created using the constructor of the input `object`,\nmaking it possible to use an array or other object as input and expect an\narray or other object as output.\n\n```js\nnew Combine([promise, stream]).each((object) => {\n    // object is an Array\n});\n```\n\nThe stream may be made mutable by passing in an options object with\n`mutable` set to `true`. In this case no new objects are constructed,\ninstead the input `object` is mutated and pushed to the output stream.\n\n```js\nnew Combine({ a: stream, b: promise }, { mutable: true }).each((object) => {\n    // object is the input object\n});\n```\n**/\n\nimport Stream from './stream.js';\n\nconst assign = Object.assign;\nconst create = Object.create;\n\n\n/*\nCombine()\n*/\n\nexport default function Combine(object, options) {\n    this.object  = object;\n    this.mutable = options && (options === true || options.mutable);\n    this.active  = false;\n}\n\nCombine.prototype = assign(create(Stream.prototype), {\n    start: function() {\n        const object = this.object;\n        const values = this.mutable ? object : {} ;\n        const inputs = {};\n\n        for (let name in object) {\n            let input = object[name];\n\n            // Ignore non-streamable inputs\n            if (!input || typeof input !== 'object') continue;\n\n            if (!input.pipe) {\n                // Convert promise to stream\n                if (input.then) input = Stream.from(input);\n                // Ignore non-streamable objects\n                else continue;\n            }\n\n            inputs[name] = input;\n        }\n\n        for (let name in inputs) {\n            let input = inputs[name];\n\n            input.each((value) => {\n                values[name] = value;\n                input.active = true;\n\n                // If there is an input not yet active abort\n                if (!this.active && Object.values(inputs).find((input) => !input.active)) return;\n                this.active = true;\n\n                Stream.push(this, this.mutable ?\n                    // Treat inputs as mutable, return it directly\n                    object :\n                    // Create new object of the same kind as the original\n                    assign(new object.constructor(), object, values)\n                );\n            });\n        }\n\n        return this;\n    }\n});\n", "\nimport Stream from './stream.js';\n\nconst assign = Object.assign;\nconst create = Object.create;\n\n/*\nClockStream(duration)\n\nIf `duration` is a number, constructs a stream of DOM timestamps at `duration`\nseconds apart.\n\nIf `duration` is `\"frame\"`, constructs a stream of DOM timestamps at the\nanimation frame rate.\n\nA ClockStream requires an explicit call to `.start()` to make it play. The\n`.start()` method optionally accepts a `startTime` parameter.\n*/\n\n\nexport default function ClockStream(duration) {\n    this.duration = duration;\n    this.timer    = undefined;\n    this.status   = 'idle';\n}\n\nClockStream.prototype = assign(create(Stream.prototype), {\n    start: function(startTime) {\n        if (this.status !== 'idle') {\n            return this;\n        }\n\n        this.status = 'waiting';\n\n        if (this.duration === 'frame') {\n            const fn = (time) => {\n                this.timer = requestAnimationFrame(fn);\n                Stream.push(this, time / 1000);\n            };\n\n            // Start producing values\n            this.timer = requestAnimationFrame(fn);\n            // OR, for immediate start\n            //fn(performance.now());\n        }\n        else {\n            const time = performance.now() / 1000;\n\n            // Wait until startTime, or where startTime is undefined, next tick\n            this.timer = setTimeout(() => {\n                const time = performance.now() / 1000;\n                const fn = () => Stream.push(this, performance.now() / 1000);\n\n                // Push time and start interval timer\n                this.status = 'playing';\n                Stream.push(this, time);\n                this.timer = setInterval(fn, this.duration * 1000);\n            }, (time > startTime ? startTime - time : 0));\n        }\n\n        return this;\n    },\n\n    stop: function(sendStopFrame) {\n        // Already stopped?\n        if (this.status === 'done') {\n            return this;\n        }\n\n        // Cancel next frame\n        if (this.duration === 'frame') {\n            cancelAnimationFrame(this.timer);\n        }\n        // Cancel waiting timeout\n        else if (this.status === 'waiting') {\n            clearTimeout(this.timer) ;\n        }\n        // Cancel playing interval\n        else {\n            clearInterval(this.timer) ;\n        }\n\n        this.timer  = undefined;\n        return Stream.stop(this);\n    }\n});\n", "\nimport Stream     from './stream.js';\nimport TimeStream from './clock-stream.js';\n\nconst assign  = Object.assign;\nconst create  = Object.create;\n\n\n/** Throttle(stream, frames) **/\n\nexport default function Throttle(duration) {\n    this.duration = duration;\n}\n\nThrottle.prototype = assign(create(Stream.prototype), {\n    push: function(value) {\n        // If no value\n        if (value === undefined) {\n            return;\n        }\n\n        // If clock is running\n        if (this.clock) {\n            // Store latest value\n            this.value = value;\n            return;\n        }\n\n        const clock = new TimeStream(this.duration);\n        const fn = (time) => {\n            // If no value has been pushed since the last one stop the clock\n            if (this.value === undefined) {\n                clock.stop();\n                this.clock = undefined;\n                return;\n            }\n\n            // Push the latest value to output\n            this[0].push(this.value);\n            this.value = undefined;\n        };\n\n\n        this.value = value;\n        this.clock = clock.each(fn).start();\n    },\n\n    stop: function(sendLastValue) {\n        // Stop the frames stream\n        if (this.clock) {\n            this.clock.stop();\n            this.clock = undefined;\n        }\n\n        if (sendLastValue) {\n            this[0].push(value);\n            this.value = undefined;\n        }\n\n        Stream.prototype.stop.apply(this, arguments);\n        return this;\n    }\n});\n", "\nimport self     from './self.js';\nimport Stream   from './stream/stream.js';\nimport Combine  from './stream/combine-stream.js';\nimport Clock    from './stream/clock-stream.js';\nimport Throttle from './stream/throttle-stream.js';\n\nconst A      = Array.prototype;\nconst assign = Object.assign;\n\n\nfunction throwTypeError(source) {\n    throw new TypeError('Stream cannot be created .from() ' + typeof source);\n}\n\nassign(Stream, {\n    /**\n    Stream.isStream(object)\n    Checks `object`'s prototype and returns `true` or `false`.\n    **/\n    isStream: function(object) {\n        return Stream.prototype.isPrototypeOf(object);\n    },\n\n    /**\n    Stream.combine(inputs)\n    Creates a stream of objects containing the latest values of all streams and\n    promises in `inputs` as they resolve:\n\n    ```js\n    Stream.combine({ a: stream, b: promise }).each((object) => {\n        // object.a and object.b are values\n    });\n    ```\n\n    If `inputs` contains properties that are not streams or promises, those are\n    also set on streamed objects:\n\n    ```js\n    Stream.combine({ a: stream, c: 5 }).each((object) => {\n        // object.c is 5\n    });\n    ```\n\n    By default immutable â€“ the stream emits new objects â€“ it can be made to\n    emit a mutated `inputs` object instead, by passing an options object with\n    `mutable` set to `true` as a second parameter. This can help minimise\n    garbage collection when dealing with large streams, but emitted objects\n    are only valid to be consumed synchronously, as the next emitted object is\n    actually the same object.\n\n    ```js\n    Stream\n    .combine({ a: stream, b: promise }, { mutable: true })\n    .each((object) => {\n        // object is the input object, properties a and b are now values\n    });\n    ```\n\n    Output objects are created using the constructor of the input `object`,\n    making it possible to use an array or other object as input and expect an\n    array or other object as output.\n\n    ```js\n    Stream.combine([promise, stream]).each((object) => {\n        // object is an Array\n    });\n    ```\n    **/\n    combine: (object, options) => new Combine(object, options),\n\n    /**\n    Stream.clock(duration)\n\n    If `duration` is a number, constructs an interval stream of DOM timestamps\n    at `duration` seconds apart.\n\n    If `duration` is `\"frame\"`, constructs a stream of DOM timestamps from\n    `requestAnimationFrame`.\n    **/\n    clock: (duration) => new Clock(duration),\n\n    /**\n    Stream.throttle(time)\n    **/\n    throttle: function(time) {\n        return new Throttle(null, time);\n    }\n});\n\nassign(Stream.prototype, {\n    /**\n    .throttle(time)\n    **/\n    throttle: function(time) {\n        return new Throttle(this, time);\n    },\n\n    /**\n    .log(...parameters)\n    **/\n    log: (window.DEBUG && window.console) ?\n        function log(...parameters) {\n            return this.map((value) => (console.log(...parameters, value), value))\n        } :\n        self\n});\n\nexport { Stream as default }\n", "\n/**\nevents(type, element)\nevents(type, element, initial)\n\nReturns a mappable stream of events heard on `element`.\n\n```js\nevents('click', element)\n.map((e) => e.target.id)\n```\n\nThe first parameter may alternatively be an options object, in which case it\nmust have a `.type` property.\n\n```js\nevents({ type: 'click' }, element)\n.map((e) => e.target.id)\n```\n\nThe object may contain a number of other properties that select the events\nreceived. It supports the standard addEventListener options, for passive and\ncapture phase event binding.\n\n```js\nevents({ type: 'scroll', passive: true, capture true }, window)\n.map((e) => window.scrollTop)\n```\n\nAnd a `.select` property, a CSS selector, that filters events to those with\ntargets that match or have a `closest()` ancestor that matches the selector.\n\n```js\nevents({ type: 'click', select: '[name=\"button\"]' }, element)\n.map((e) => e.target.id)\n```\n\nHowever, if you need to delegate events it is recommended to use the\n`delegate()` function, which has the added benefit of direct access to the\ndelegated target.\n\n```js\nevents('click', element)\n.each(delegate({\n    '[name=\"button\"]': (target, e) => console.log(target.id),\n    '[name=\"remove\"]': (target, e) => document.getElementById(target.value).remove(),\n    ...\n}))\n```\n\nStopping an event stream removes its event listeners.\n\n```js\nevents('click', element).stop()\n```\n\nPass in an `initial` object to have the event stream start synchronously\nwith the initial object when consumed.\n\n```js\nevents(type, element, initial)\n```\n**/\n\nimport cache  from 'fn/cache.js';\nimport Stream from 'fn/stream/stream.js';\n\nconst assign  = Object.assign;\nconst rspaces = /\\s+/;\nconst types   = {\n    fullscreenchange: cache(() => (\n        'fullscreenElement' in document ? 'fullscreenchange' :\n        'webkitFullscreenElement' in document ? 'webkitfullscreenchange' :\n        'mozFullScreenElement' in document ? 'mozfullscreenchange' :\n        'msFullscreenElement' in document ? 'MSFullscreenChange' :\n        'fullscreenchange'\n    ))\n};\n\n\n// DOM click events may be simulated on inputs when their labels are\n// clicked. The tell-tale is they have the same timeStamp. Track click\n// timeStamps.\nvar clickTimeStamp = 0;\n\nwindow.addEventListener('click', (e) => clickTimeStamp = e.timeStamp);\n\nfunction listen(listener, type) {\n    listener.node.addEventListener(types[type] ? types[type]() : type, listener, listener.options);\n    return listener;\n}\n\nfunction unlisten(listener, type) {\n    listener.node.removeEventListener(types[type] ? types[type]() : type, listener);\n    return listener;\n}\n\nclass Events extends Stream {\n    constructor(type, options, node, initialEvent) {\n        super();\n\n        // Potential hard-to-find error here if type has repeats, ie 'click click'.\n        // Lets assume nobody is dumb enough to do this, I dont want to have to\n        // check for that every time.\n        this.types        = type.split(rspaces);\n        this.options      = options;\n        this.node         = node;\n        this.select       = options && options.select;\n        this.modifiers    = options && options.modifiers;\n        this.initialEvent = initialEvent;\n    }\n\n    handleEvent(e) {\n        // Ignore clicks with the same timeStamp as previous clicks â€“\n        // they are likely simulated by the browser, eg. clicks on labels\n        // cause simulated clicks to be emitted from inputs\n        if (e.type === 'click' && e.timeStamp <= clickTimeStamp) return;\n\n        // Inspect modifier keys\n        if (this.modifiers) {\n            const modifiers = typeof this.modifiers === 'string' ?\n                this.modifiers.split(/\\s+/) :\n                this.modifiers ;\n\n            let n = modifiers.length;\n            while (n--) if (!e[modifiers[n] + 'Key']) return;\n        }\n\n        // If there is a selector and the target doesn't match, shoofty\n        // outta here\n        if (this.select) {\n            const selectedTarget = e.target.closest(this.select);\n            if (!selectedTarget) return;\n            e.selectedTarget = selectedTarget;\n        }\n\n        Stream.push(this, e);\n    }\n\n    start() {\n        this.types.reduce(listen, this);\n\n        if (this.initialEvent) {\n            this.handleEvent(this.initialEvent);\n            delete this.initialEvent;\n        };\n\n        return this;\n    }\n\n    stop() {\n        this.types.reduce(unlisten, this);\n        return super.stop();\n    }\n}\n\nexport default function events(type, node, initialEvent) {\n    let options;\n    if (typeof type === 'object') {\n        options = type;\n        type    = options.type;\n    }\n\n    return new Events(type, options, node, initialEvent);\n}\n", "import curry from './curry.js';\n\n/**\nparseValue(units, string)\n\nParse `string` as a value with a unit (such as `\"3px\"`). Parameter `units` is an\nobject of functions keyed by the unit postfix. It may also have a `catch`\nfunction.\n\n```js=\nconst parseUnitValue = parseValue({\n    px: function(n) {\n        return n;\n    },\n\n    catch: function(string) {\n        throw new Error('Cannot parse px value');\n    }\n});\n```\n**/\n\n// Be generous in what we accept, space-wise, but exclude spaces between the\n// number and the unit\nconst runit = /^\\s*([+-]?\\d*\\.?\\d+)([^\\s]*)\\s*$/;\n\nexport default function parseValue(units) {\n    return function parseValue(string) {\n        // Allow number to pass through\n        if (typeof string === 'number') {\n            return string;\n        }\n\n        var entry = runit.exec(string);\n\n        if (!entry || !units[entry[2] || '']) {\n            if (!units.catch) {\n                throw new Error('Cannot parse value \"' + string + '\" (accepted units ' + Object.keys(units).join(', ') + ')');\n            }\n\n            return entry ?\n                units.catch(parseFloat(entry[1]), entry[2]) :\n                units.catch(parseFloat(string)) ;\n        }\n\n        return units[entry[2] || ''](parseFloat(entry[1]));\n    };\n}\n", "\n/**\ntoRad(deg)\n**/\n\nexport default (n) => n * Math.PI / 180;\n", "\nimport id         from './id.js';\nimport parseValue from './parse-value.js';\nimport toRad      from './to-rad.js';\n\n/**\nparseAngle(string)\nParses strings of the form `'45deg'`, `'0rad'` or `'0.5turn'`. Returns a\nnumber in radians. If `string` is a number, it passes through.\n**/\n\nexport default parseValue({\n    deg:  toRad,\n    rad:  id,\n    turn: (n) => n * 2 * Math.PI,\n    catch: function(string) {\n        throw new Error('Cannot parse value \"' + string + '\"');\n    }\n});\n", "/**\nstyle(property, node)\n\nReturns the computed style `property` of `node`.\n    style('transform', node);  // returns transform\n*/\n\nimport parseAngle from 'fn/parse-angle.js';\n\nvar rpx    = /px$/;\nvar rangle = /deg$|turn$|rad$/;\n\nfunction computedStyle(name, node) {\n\treturn window.getComputedStyle ?\n\t\twindow\n\t\t.getComputedStyle(node, null)\n\t\t.getPropertyValue(name) :\n\t\t0 ;\n}\n\nexport default function style(name, node) {\n    var value = computedStyle(name, node);\n\n    // Pixel values are converted to number type\n    return typeof value === 'string' ?\n\t\trpx.test(value) ? parseFloat(value) :\n\t\trangle.test(value) ? parseAngle(value) :\n        value :\n\t\tvalue ;\n}\n", "// Units\n\nimport id         from 'fn/id.js';\nimport overload   from 'fn/overload.js';\nimport toType     from 'fn/to-type.js';\nimport parseValue from 'fn/parse-value.js';\nimport style      from './style.js';\n\n\n/* Track document font size */\n\nlet emSize;\nlet remSize;\n\nfunction getEmSize() {\n    if (!emSize) {\n        if (window.DEBUG) {\n            console.warn('Calculating root em value may cause reflow as user font-size cannot be known without setting <html style=\"font-size: 100%;\">');\n        }\n\n        const styledFontSize = document.documentElement.style.fontSize;\n        document.documentElement.style.fontSize = '100%';\n        emSize = style(\"font-size\", document.documentElement);\n        document.documentElement.style.fontSize = styledFontSize || '';\n    }\n\n    return emSize;\n}\n\nfunction getRemSize() {\n    if (!remSize) {\n        remSize = style(\"font-size\", document.documentElement);\n    }\n\n    return remSize;\n}\n\nwindow.addEventListener('resize', () => {\n    emSize  = undefined;\n    remSize = undefined;\n});\n\n/**\npx(value)\nTakes a number in pixels or a string of the form `'10px'`, `'10em'`, `'10rem'`,\n`'100vw'`, `'100vh'`, `'100vmin'` or `'100vmax'`, and returns a numeric value\nin pixels.\n*/\n\nexport const px = overload(toType, {\n    'number': id,\n\n    'string': parseValue({\n        px:   id,\n        em:   (n) => getEmSize() * n,\n        rem:  (n) => getRemSize() * n,\n        vw:   (n) => window.innerWidth * n / 100,\n        vh:   (n) => window.innerHeight * n / 100,\n\n        vmin: (n) => (\n            window.innerWidth < window.innerHeight ?\n                window.innerWidth * n / 100 :\n                window.innerHeight * n / 100\n        ),\n\n        vmax: (n) => (\n            window.innerWidth < window.innerHeight ?\n                window.innerHeight * n / 100 :\n                window.innerWidth * n / 100\n        )\n    })\n});\n\nexport default px;\n\n/**\nem(value)\nTakes numeric value in px, or CSS length of the form `'10px'`, and returns\na numeric value in `em`, eg. `0.625`. Depends on the user defined browser\n`font-size`.\n*/\n\nexport function em(n) {\n    return px(n) / getEmSize();\n}\n\n/**\nrem(value)\nTakes numeric value in px, or CSS length of the form `'10px'`, and returns\na numeric value in `rem`, eg. `0.625`. Depends on the `font-size` of the\ndocumentElement.\n*/\n\nexport function rem(n) {\n    return px(n) / getRemSize();\n}\n\n/**\nvw(value)\nTakes number in pixels or CSS length of the form `'10em'` and returns a\nnumeric value in `vw`, eg. `120`. Depends on the width of the viewport at\nrender time.\n*/\n\nexport function vw(n) {\n    return 100 * px(n) / window.innerWidth;\n}\n\n/**\nvh(value)\nTakes number in pixels or CSS length of the form `'10em'` and returns a\nnumeric value in `vh`, eg. `120`. Depends on the height of the viewport at\nrender time.\n*/\n\nexport function vh(n) {\n    return 100 * px(n) / window.innerHeight;\n}\n\n/**\nvmin(value)\nTakes number in pixels or CSS length of the form `'10em'` and returns a\nnumeric value in `vmin`, eg. `120`. Depends on the minimum dimension of the\nviewport at render time.\n*/\n\nexport function vmin(n) {\n    return 100 * px(n) / (\n        window.innerWidth < window.innerHeight ?\n            window.innerWidth :\n            window.innerHeight\n    );\n}\n\n/**\nvmax(value)\nTakes number in pixels or CSS length of the form `'10em'` and returns a\nnumeric value in `vmax`, eg. `120`. Depends on the maximum dimension of the\nviewport at render time.\n*/\n\nexport function vmax(n) {\n    return 100 * px(n) / (\n        window.innerWidth < window.innerHeight ?\n            window.innerHeight :\n            window.innerWidth\n    );\n}\n", "\n/**\ngestures(options, node)\n\nReturns a stream of streams of events. Each stream of events represents the\nmotion of a single finger. The types of events the stream contains is a\n`'pointerdown'` followed by any number of `'pointermove'`s and a `'pointerup'`\nor `'pointercancel'` event.\n\n```js\ngestures({ select: '.thing', threshold: '0.5rem', device: 'mouse pen touch' }, document.body)\n.each(function(events) { ... });\n```\n\nThe `options` object may optionally contain any of:\n\n```js\n{\n    // Listen to gestures on a given device type. Internally the pointer events'\n    // e.pointerType is matched against this string: it may contain any of the\n    // types 'pen', 'mouse' and 'touch'. Where not defined, all pointer types\n    // trigger a gesture\n    device: 'mouse pen',\n\n    // Listen to gestures inside a selected element or elements\n    select: '.class'\n\n    // Determine a minimum distance a finger must travel before a gesture is\n    // considered to have started. Defaults to 4px.\n    threshold: '0.25rem'\n}\n```\n\nIt is a Very Good Idea to style whatever element is being gestured with\n`touch-action` to avoid the browser sending `pointercancel` events when it\nthinks you are trying to perform some native pan or scroll\n([MDN touch-action](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action))\n*/\n\nimport get      from 'fn/get.js';\nimport overload from 'fn/overload.js';\nimport Stream   from 'fn/stream/stream.js';\nimport px       from './parse-length.js';\n\nconst A      = Array.prototype;\nconst assign = Object.assign;\n\nconst userSelect = 'webkitUserSelect' in document.body.style ?\n    'webkitUserSelect' :\n    'userSelect' ;\n\nconst store = {};\n\nexport const config = {\n    // Number of pixels, or string CSS length, that a pressed pointer travels\n    // before gesture is started.\n    threshold: 4,\n\n    ignoreTags: {\n        textarea: true,\n        input: true,\n        select: true\n    }\n};\n\nlet clickSuppressionTimestamp = -Infinity;\n\nfunction stopPropagation(e) {\n    if (e.timeStamp - clickSuppressionTimestamp > 60) { return; }\n    e.stopPropagation();\n    e.preventDefault();\n}\n\n/* PointerStream, pointerup and pointercancel handler */\n\nfunction distanceThreshold(distance, x, y) {\n    return (x * x + y * y) >= (distance * distance);\n}\n\nclass PointerStream extends Stream {\n    constructor(stream, target, e, options) {\n        super();\n\n        this.stream    = stream;\n        this.target    = target;\n        this.buffer    = [e];\n        this.options   = options;\n        this.pointerId = e.pointerId;\n\n        if (typeof options.threshold === 'function') {\n            // options.threshold is a function\n            this.checkThreshold = options.threshold;\n        }\n        else {\n            // options.threshold is a string or number\n            const distance = px(options.threshold);\n            this.checkThreshold = (x, y, t) => distanceThreshold(distance, x, y, t);\n        }\n\n        document.addEventListener('pointermove', this);\n        document.addEventListener('pointerup', this);\n        document.addEventListener('pointercancel', this);\n    }\n\n    createGesture() {\n        // We are gesturing! Let's go\n        this.isGesture = true;\n\n        // For the duration of us dragging the pointer around we need to\n        // prevent text selection on the document. Note doing this does not\n        // deselect any text that has already been selected.\n        this.userSelectState = document.body.style[userSelect];\n        document.body.style[userSelect] = 'none';\n\n        // Keep a record of which pointers are currently responsible for\n        // gestures - we only want one per pointer, max\n        store[this.pointerId] = this;\n\n        // Encourage pointer events for this pointerId to come from this\n        // element only\n        this.target.setPointerCapture(this.pointerId);\n\n        // Push this pointer stream to gestures\n        Stream.push(this.stream, this);\n    }\n\n    start() {\n        // Empty buffer into stream\n        while(this.buffer.length) Stream.push(this, this.buffer.shift());\n\n        // Remove buffer\n        this.buffer = undefined;\n    }\n\n    stop() {\n        // Remove the listeners\n        document.removeEventListener('pointermove', this);\n        document.removeEventListener('pointerup', this);\n        document.removeEventListener('pointercancel', this);\n\n        // Is it already stopped?\n        if (this.isGesture) {\n            // Reset text selectability\n            document.body.style[userSelect] = this.userSelectState;\n\n            // Remove record that keeps this pointerId bound to this gesture\n            delete store[this.pointerId];\n        }\n\n        return Stream.stop(this);\n    }\n}\n\nassign(PointerStream.prototype, {\n    handleEvent: overload(get('type'), {\n        'pointermove': function(e) {\n            // If it's not a move from this gesture's pointer we're not interested\n            if (this.pointerId !== e.pointerId) return;\n\n            // If pointer is already gesturing don't allow it to start another\n            if (this.pointerId in store && this !== store[this.pointerId]) return this.stop();\n\n            // We are still buffering\n            if (this.buffer) this.buffer.push(e);\n\n            // We are actively observing\n            else Stream.push(this, e);\n\n            // Not yet pushed to gestures\n            if (!this.isGesture) {\n                // Check to see if we have satisfied the threshold check for\n                // x, y and time, if so start the gesture\n                const e0 = this.buffer[0];\n                const x  = e.clientX - e0.clientX;\n                const y  = e.clientY - e0.clientY;\n                const t  = (e.timeStamp - e0.timeStamp) / 1000;\n\n                if (this.checkThreshold(x, y, t)) this.createGesture();\n            }\n        },\n\n        'pointerup': function(e) {\n            // Pointer ids do not match\n            if (this.pointerId !== e.pointerId) return;\n\n            // We are still buffering\n            if (this.buffer) this.buffer.push(e);\n\n            // We are actively observing\n            else Stream.push(this, e);\n\n            this.target.releasePointerCapture(this.pointerId);\n            this.stop();\n\n            // Suppress click event that follows pointerup\n            if (this.isGesture) {\n                clickSuppressionTimestamp = e.timeStamp;\n                document.addEventListener('click', stopPropagation, {\n                    capture: true,\n                    once: true\n                });\n            }\n        },\n\n        'default': function(e) {\n            if (this.pointerId !== e.pointerId) return;\n            this.buffer.push(e);\n            this.target.releasePointerCapture(this.pointerId);\n            this.stop();\n        }\n    })\n});\n\n\n/* Pointerdown handler */\n\nfunction isIgnoreTag(e) {\n    var tag = e.target.tagName;\n    return tag && (!!config.ignoreTags[tag.toLowerCase()] || e.target.draggable);\n}\n\nclass Gestures extends Stream {\n    constructor(node, options) {\n        super();\n\n        this.node    = node;\n        this.options = options;\n    }\n\n    handleEvent(e) {\n        // Ignore non-primary buttons\n        if (e.button !== 0) return;\n\n        // Check pointer type is in options\n        if (this.options.device && !this.options.device.includes(e.pointerType)) return;\n\n        // Ignore form and interactive elements\n        if (isIgnoreTag(e)) return;\n\n        // Check target matches selector\n        let target = e.target;\n        if (this.options.select) {\n            target = e.target.closest(this.options.select);\n            if (!target) return;\n        }\n\n        // Copy event to keep the true target around, as target is mutated on\n        // the event if it passes through a shadow boundary after being handled\n        // here, causing a rare but very gnarly bug hunt.\n        var event = {\n            type:          e.type,\n            target:        e.target,\n            currentTarget: e.currentTarget,\n            clientX:       e.clientX,\n            clientY:       e.clientY,\n            timeStamp:     e.timeStamp,\n            pointerId:     e.pointerId\n        };\n\n        new PointerStream(this, target, event, this.options);\n    }\n\n    start() {\n        this.node.addEventListener('pointerdown', this);\n        return this;\n    }\n\n    // Stop the gestures stream\n    stop() {\n        this.node.removeEventListener('pointerdown', this);\n        return Stream.stop(this);\n    }\n}\n\n\n/* Gestures */\n\nexport default function gestures(options, node) {\n    options = node ?\n        options ? assign({}, config, options) : config :\n        config ;\n\n    node = node ?\n        node :\n        options ;\n\n    if (window.DEBUG && options.selector) {\n        console.warn('gestures(options) deprecated options.selector, name changed to options.select');\n    }\n\n    return new Gestures(node, options);\n}\n", "\n/**\nisPrimaryButton(e)\nReturns `true` if event is from the primary (normally the left or only)\nbutton of an input device. Use this to filter out right-clicks.\n*/\n\nexport default function isPrimaryButton(e) {\n    // Ignore mousedowns on any button other than the left (or primary)\n    // mouse button, or when a modifier key is pressed.\n    return (e.which === 1 && !e.ctrlKey && !e.altKey && !e.shiftKey);\n}\n", "\n/**\nrect(node)\n\nReturns a `DOMRect` object describing the draw rectangle of `node`.\n(If `node` is `window` a preudo-DOMRect object is returned).\n**/\n\nfunction windowBox() {\n\treturn {\n\t\tx:      0,\n\t\ty:      0,\n\t\tleft:   0,\n\t\ttop:    0,\n\t\tright:  window.innerWidth,\n\t\tbottom: window.innerHeight,\n\t\twidth:  window.innerWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\nexport default function rect(node) {\n\treturn node === window ?\n\t\twindowBox() :\n        // In Safari SVG shapes dont get a .getClientRects()[0] so fallback to\n        // .getBoundingClientRect()\n\t\tnode.getClientRects()[0] || node.getBoundingClientRect() ;\n}\n", "\n/**\ntrigger(type, node)\n\nTriggers event of `type` on `node`. Returns `false` if the event default was\nprevented, otherwise `true`.\n\n```\ntrigger('activate', node);\n```\n\nAlternatively the first argument may be an object with a `type` property, and\noptionally `detail`, which must be an object, and `bubbles`, `cancelable` and\n`composed` options, which determine the behaviour of the event.\n\n```\ntrigger({\n    type:       'activate',\n    detail:     {...},\n    bubbles:    true,\n    cancelable: true,\n    composed:   false\n}, node);\n```\n**/\n\nimport curry from 'fn/curry.js';\n\nconst assign   = Object.assign;\n\nconst defaults = {\n    // The event bubbles (false by default)\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/Event\n    bubbles: true,\n\n    // The event may be cancelled (false by default)\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/Event\n    cancelable: true\n\n    // Trigger listeners outside of a shadow root (false by default)\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/composed\n    //composed: false\n};\n\nexport function trigger(type, node) {\n    let options = defaults;\n    let properties, detail, bubbles, cancelable, composed, event;\n\n    if (typeof type === 'object') {\n        ({ type, detail, bubbles, cancelable, composed, ...properties } = type);\n\n        // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent\n        // Options accepted by CustomEvent:\n        // detail:     any\n        // bubbles:    true | false\n        // cancelable: true | false\n        // composed:   true | false\n        event = assign(new CustomEvent(type, {\n            detail,\n            bubbles:    bubbles    || defaults.bubbles,\n            cancelable: cancelable || defaults.cancelable,\n            composed:   composed   || defaults.composed\n        }), properties);\n    }\n    else {\n        event = new CustomEvent(type, defaults);\n    }\n\n    return node.dispatchEvent(event);\n}\n\nexport default curry(trigger, true);\n", "\nexport const $data = Symbol('data');\n\nexport const config = {\n    minScrollInterval: 0.0375,\n    maxScrollInterval: 0.18\n};\n\n\n/*\nscrollInterval\nKeep a heuristic of the shortest 'safe' time between scroll events, used by\nscroll and swipe streams to determine when a scroll may have come to rest.\n*/\n\nlet scrollInterval = config.maxScrollInterval;\n\nexport function updateScrollInterval(times) {\n    // Dynamically adjust scrollInterval to tighten it up,\n    // imposing a baseline of config.minScrollInterval (0.0375s * 1.4)\n\n    let n = times.length;\n    let interval = 0;\n\n    while (--n) {\n        const t = times[n] - times[n - 1];\n        interval = t > interval ? t : interval;\n    }\n\n    interval = interval < config.minScrollInterval ?\n        config.minScrollInterval :\n        interval ;\n\n    scrollInterval = (1.4 * interval) > config.maxScrollInterval ?\n        config.maxScrollInterval :\n        (1.4 * interval) ;\n}\n\nexport function getScrollInterval() {\n    return scrollInterval;\n}\n", "\nexport default 'MozAppearance' in document.documentElement.style;\n", "\n/*\nDetect and scroll to active slides. The active is the slide currently in\nscroll-snap alignment.\n*/\n\nimport { px } from 'dom/parse-length.js';\nimport rect   from 'dom/rect.js';\nimport isFF   from 'dom/is-firefox.js';\n\n// FireFox resets scrollLeft to 0 on DOMContentLoaded. Naughty FireFox. We\n// can not feature detect this until it has happened, unfortunately, so we\n// are forced to use a browser hack `isFF`.\nlet DOMContentLoaded = false;\nif (isFF) {\n    document.addEventListener('DOMContentLoaded', (e) => DOMContentLoaded = true);\n}\n\nfunction getPaddedBox(slides) {\n    const box          = rect(slides);\n    const computed     = window.getComputedStyle(slides, null);\n\n    // TODO: These values may contain `calc()`, which won't parse. How do we get\n    // used or actual values out of CSS?\n    let paddingLeft, paddingRight;\n    try {\n        paddingLeft  = px(computed.getPropertyValue('padding-left'));\n        paddingRight = px(computed.getPropertyValue('padding-right'));\n    }\n    catch(e) {\n        console.warn(e.message);\n        paddingLeft  = 0;\n        paddingRight = 0;\n    }\n\n    box.leftPadding   = box.left + paddingLeft;\n    box.rightPadding  = box.left + box.width - paddingRight;\n    box.centrePadding = box.leftPadding + (box.width - paddingLeft - paddingRight) / 2;\n\n    return box;\n}\n\nfunction getSnapX(element) {\n    // Todo: do we need webkit property here?\n    const snap = window\n        .getComputedStyle(element, null)\n        .getPropertyValue('scroll-snap-align');\n\n    // Imagine a detection line half a slides' width to the right of\n    // the left, the centre, or the right...\n    return snap.endsWith('start') ? 'left' :\n        snap.endsWith('end')   ? 'right' :\n        'centre' ;\n}\n\nfunction scrollToTarget(slides, target, behavior) {\n    const slidesBox = getPaddedBox(slides);\n    const targetBox   = rect(target);\n    const snap        = getSnapX(target);\n\n    // Move scroll position to target slide, taking into account\n    // scroll-snap-align of the slide\n    const position = {\n        top:  slides.scrollTop,\n        left: slides.scrollLeft + (\n            snap === 'left' ? targetBox.left - slidesBox.leftPadding :\n            snap === 'right' ? targetBox.right - slidesBox.rightPadding :\n            targetBox.left + (targetBox.width / 2) - slidesBox.centrePadding\n        ),\n        behavior: behavior\n    };\n\n    slides.scrollTo(position);\n\n    // In Firefox, wait for DOMContentLoaded and set position again.\n    if (isFF && !DOMContentLoaded) {\n        document.addEventListener('DOMContentLoaded', () => slides.scrollTo(position));\n    }\n}\n\nexport function scrollTo(slides, target) {\n    scrollToTarget(slides, target, 'smooth');\n    return target;\n}\n\nexport function jumpTo(slides, target) {\n    slides.style.setProperty('scroll-behavior', 'auto', 'important');\n    scrollToTarget(slides, target, 'auto');\n    slides.style.setProperty('scroll-behavior', '');\n    return target;\n}\n\nfunction getAligned(slides, elements) {\n    const { leftPadding, rightPadding, centrePadding } = getPaddedBox(slides);\n\n    let n = elements.length;\n    let slide;\n\n    while ((slide = elements[--n])) {\n        const slideRect = rect(slide);\n\n        if (!slideRect) { continue; }\n\n        // Todo: do we need webkit property here?\n        const snap = getSnapX(slide);\n\n        // Imagine a detection line half a slides' width to the right of\n        // the left, the centre, or the right...\n        const detection = (slideRect.width / 2) + (\n            snap === 'left' ? leftPadding :\n            snap === 'right' ? rightPadding :\n            centrePadding\n        );\n\n        // ...and a slide registration position at it's corresponding left,\n        // centre or right position. Safari reports 2 values for\n        // scroll-snap-align it's the second that is the inline axis value\n        const x = snap === 'left' ? slideRect.left :\n            snap === 'right' ? slideRect.right :\n            slideRect.left + slideRect.width / 2 ;\n\n        // If position has crossed the detection going left, we're in the money\n        if (x <= detection) {\n            break;\n        }\n    }\n\n    // Return active slide\n    return slide;\n}\n\nfunction isGhost(slide) {\n    return !!slide.dataset.slideIndex;\n}\n\nexport function getActive(data) {\n    const { slides, elements, children } = data;\n    const aligned = getAligned(slides, elements);\n    return isGhost(aligned) ?\n        children[aligned.dataset.slideIndex] :\n        aligned ;\n}\n\nexport function updateActive(data) {\n    const { slides, children, elements } = data;\n    const current = getAligned(slides, elements);\n    let active;\n\n    // If current is a loop ghost jump to the actual slide it references\n    if (!current) { return; }\n    if (isGhost(current)) {\n        active = children[current.dataset.slideIndex];\n        jumpTo(slides, active);\n    }\n    else {\n        active = current;\n    }\n\n    data.activations.push(active);\n}\n\n\nexport function activateIndex(host, elements, i) {\n    const target = elements[i];\n    if (!target) { return; }\n    host.active = target;\n}\n\nexport function activateNext(host, elements, active) {\n    const i = elements.indexOf(active) + 1;\n    activateIndex(host, elements, i);\n}\n\nexport function activatePrevious(host, elements, active) {\n    const i = elements.indexOf(active) - 1;\n    activateIndex(host, elements, i);\n}\n", "\nimport events   from 'dom/events.js';\nimport overload from 'fn/overload.js';\n\nimport { getActive }         from './active.js';\nimport { getScrollInterval } from './consts.js';\n\nfunction resetScroll(slides, scrolls) {\n    slides.style.setProperty('scroll-snap-type', '');\n    scrolls.stop();\n}\n\nexport const processPointers = overload((data, e) => e.type, {\n    pointerdown: function(data, e) {\n        // First event is touchstart or mousedown\n        data.e0 = e;\n        data.x0 = e.clientX;\n        data.y0 = e.clientY;\n\n        return data;\n    },\n\n    pointermove: function(data, e) {\n        const x1 = e.clientX;\n        const y1 = e.clientY;\n\n        // Determine whether to start a gesture\n        if (!data.gesturing) {\n            // If the movement is more vertical than horizontal, don't count it\n            // as a swipe. Stop the stream and get out of here.\n            if (Math.abs(x1 - data.x0) < Math.abs(y1 - data.y0)) {\n                data.pointers.stop();\n                data.pointers = undefined;\n                data.e0 = undefined;\n                data.x0 = undefined;\n                data.y0 = undefined;\n                return;\n            }\n\n            data.scrollLeft0 = data.slides.scrollLeft;\n            data.slides.style.setProperty('scroll-snap-type', 'none', 'important');\n            data.slides.style.setProperty('scroll-behavior', 'auto', 'important');\n            data.gesturing = true;\n        }\n\n        const dx = e.clientX - data.x0;\n        data.slides.scrollLeft = data.scrollLeft0 - dx;\n\n        return data;\n    },\n\n    // Catches pointerup and pointercancel\n    default: function(data, e) {\n        const slides = data.slides;\n\n        // Track the end of click to allow click suppression\n        data.clickSuppressTime = e.timeStamp;\n\n        // Here we must go through a whole rigmarole in an attempt to avoid\n        // scroll jumps at the end of a swipe. Find out where it is, ...\n        const scrollLeft1 = slides.scrollLeft;\n        slides.style.setProperty('scroll-snap-type', '');\n\n        // and where it would snap to.\n        const scrollLeft2 = slides.scrollLeft;\n\n        // If those numbers are the same we are probably in FF, where removing\n        // scroll-snap does not cause an immediate jump to a snap alignment.\n        if (scrollLeft1 === scrollLeft2) {\n            // We can trust the browser to smooth scroll when we reset it.\n            slides.style.setProperty('scroll-behavior', '');\n        }\n        else {\n            // Otherwise we have to do things the hard way. We may as well\n            // preemptively update the active slide now, since we are sitting\n            // in the new position. This is not a crucial step, just makes the\n            // UI react a bit more quickly.\n            const active = getActive(data);\n            data.activations.push(active);\n\n            // Switch scroll-snap off again and put scroll back to position 1...\n            slides.style.setProperty('scroll-snap-type', 'none', 'important');\n            slides.scrollLeft = scrollLeft1;\n\n            // then manually smooth scroll over to position 2...\n            slides.style.setProperty('scroll-behavior', '');\n            slides.scrollTo({\n                top:  slides.scrollTop,\n                left: scrollLeft2,\n                behavior: 'smooth'\n            });\n\n            // and finally, switch scroll snapping back on when that scroll\n            // comes to rest (scrollInterval passes without an event).\n            events({ type: 'scroll', passive: true }, slides)\n            .reduce((frame, e, i, stream) => {\n                clearTimeout(frame);\n                return setTimeout(resetScroll, getScrollInterval() * 1000, slides, stream);\n            });\n\n            // Ooof. What a polava.\n        }\n\n        data.gesturing = false;\n        data.e0 = undefined;\n        data.x0 = undefined;\n        data.y0 = undefined;\n        data.pointers  = undefined;\n        data.scrollLeft0 = undefined;\n\n        return data;\n    }\n});\n", "\n// Much of this code has been purloined from targetable.js â€“ do we need the\n// hashchange tracking here? I have commented it\n\nimport Stream from 'fn/stream/stream.js';\nimport { getScrollInterval, updateScrollInterval } from './consts.js';\n\nconst assign = Object.assign;\n\n// Capture scroll events in capture phase, as scroll events from elements\n// other than document do not bubble.\nconst captureOptions = {\n    capture: true,\n    passive: true\n};\n\nfunction fire(stream, e) {\n    stream.timer = undefined;\n    Stream.push(stream, e);\n    const times = stream.times;\n    if (times.length > 1) { updateScrollInterval(times); }\n    times.length = 0;\n}\n\nclass Scrollends extends Stream {\n    constructor(element) {\n        super();\n        this.element = element;\n        this.times   = [];\n    }\n\n    start() {\n        this.element.addEventListener('scroll', this, captureOptions);\n        return this;\n    }\n\n    handleEvent(e) {\n        const time = e.timeStamp / 1000;\n        this.times.push(time);\n\n        if (this.timer) {\n            clearTimeout(this.timer);\n        }\n\n        this.timer = setTimeout(fire, getScrollInterval() * 1000, this, e);\n    }\n\n    stop() {\n        this.element.removeEventListener('scroll', this);\n        return Stream.stop(this);\n    }\n}\n\nexport default function scrollends(element) {\n    return new Scrollends(element);\n}\n", "\nimport equals          from 'fn/equals.js';\nimport get             from 'fn/get.js';\nimport noop            from 'fn/noop.js';\nimport nothing         from 'fn/nothing.js';\nimport overload        from 'fn/overload.js';\nimport Stream          from 'fn/stream.js';\nimport create          from 'dom/create.js';\nimport events          from 'dom/events.js';\nimport gestures        from 'dom/gestures.js';\nimport isPrimaryButton from 'dom/is-primary-button.js';\nimport { px }          from 'dom/parse-length.js';\nimport rect            from 'dom/rect.js';\nimport { trigger }     from 'dom/trigger.js';\n\nimport { $data }     from './consts.js';\nimport { scrollTo, jumpTo, updateActive } from './active.js';\nimport { processPointers } from './swipes.js';\nimport scrollends    from './scrollends.js';\n\n\nfunction getWidth(slides, slot, children) {\n    let n = children.length;\n    let r = -Infinity;\n\n    while (n--) {\n        const box   = rect(children[n]);\n        const right = box.x + box.width;\n        r = right > r ? right : r;\n    }\n\n    const box   = rect(slot);\n    const style = getComputedStyle(slides);\n    const pl    = px(style.paddingLeft || 0);\n    const pr    = px(style.paddingRight || 0);\n\n    return pl + pr + r - box.x;\n}\n\nfunction updateWidth(slides, slot, children) {\n    const width = getWidth(slides, slot, children);\n    slides.style.setProperty('--scroll-width', width + 'px');\n}\n\nfunction isSlide(slide) {\n    // Filter out loop ghosts\n    return !slide.dataset.slideIndex;\n}\n\n\n/* Lifecycle */\n\n/**\n'slide-active'\nEmitted by a slide when it is brought into scroll-snap alignment.\n**/\n\nexport default {\n    // Uhoh Kavea needs access to scroll events ... what we gonna do here?\n    mode: 'open',\n\n    construct: function(shadow) {\n        // Shadow DOM\n        const slot     = create('slot');\n        const slides   = create('div',  { part: 'slides', children: [slot] });\n        const controls = create('nav',  { part: 'controls', children: [\n            create('slot', { name: 'controls' })\n        ] });\n\n        // Add slots to shadow\n        shadow.append(slides, controls);\n\n        // Stream to push load to\n        const connects = Stream.of();\n        const load     = Stream.of();\n\n        // In Chrome and FF initial `slotchange` event is always sent before\n        // load, but not so in Safari where either order may happen (at a guess\n        // due to some caching strategy). Here we sanitise order by making\n        // slotchanges stream always fire after load.\n        const slotchanges = Stream\n            .combine({\n                host: load,\n                elements: events('slotchange', slot)\n                    .map((e) => data.elements = slot.assignedElements()),\n            });\n            //.broadcast({ memory: true });\n\n        const mutations = slotchanges\n            .map((state) => {\n                const children = state.elements.filter(isSlide);\n                return equals(data.children, children) ?\n                    undefined :\n                    (data.children = children) ;\n            });\n            //.broadcast({ memory: true, hot: true });\n// Keep it hot\nmutations.pipe({ push: noop });\n        // Buffer stream for pushing children to scroll into view then activate\n        const views = Stream.of();\n\n        // Buffer stream for pushing children to activate\n        const activations = Stream.of();\n\n        // Broadcast stream for listening to changes to active\n        const actives = activations\n            .map((child) => (child.dataset.slideIndex ?\n                data.children[child.dataset.slideIndex] :\n                child\n            ))\n            .filter((child) => (data.active !== child && trigger('slide-active', child)))\n            .map((child) => data.active = child);\n            //.broadcast({ memory: true, hot: true });\n// Keep it hot\nactives.pipe({ push: noop });\n        const clicks = events('click', shadow)\n            .filter(isPrimaryButton);\n            //.broadcast();\n\n        // Track when scroll comes to rest...\n        const scrolls = scrollends(slides)\n            // ...but not after disconnect or mid finger gesture...\n            .filter((e) => (data.connected && !data.gesturing));\n            //.broadcast();\n\n        // Private data\n        const data = this[$data] = {\n            clickSuppressTime: -Infinity,\n            connected: false,\n            host:      this,\n            style:     window.getComputedStyle(this),\n            elements:  nothing,\n            children:  nothing,\n            device:    undefined,\n            shadow,\n            slides,\n            slot,\n            controls,\n            connects,\n            load,\n            views,\n            activations,\n            actives,\n            slotchanges,\n            mutations,\n            clicks,\n            scrolls\n        };\n\n        // Create a stream of width updates on slotchanges and resizes. We\n        // cannot know if the slide-show is visible â€“ it may have display: none â€“\n        // so we must protect against update in cases where it is not, and cross\n        // our fingers it is updated somehow when it is made visible.\n        Stream\n        .merge(slotchanges, events('resize', window))\n        .filter((e) => (slot.offsetWidth && slot.offsetHeight))\n        .each((e) => updateWidth(slides, slot, data.elements));\n\n        // Wait for first slotchange/load, then maintain active position. In\n        // Chrome this fails on connect, as it appears the style is not applied\n        // immediately, so jumpTo() can't measure positions properly.\n        Stream\n        .combine({ slotchanges, connects })\n        .map((state) => (data.elements.includes(data.active) ?\n            data.active :\n            data.children[0]\n        ))\n        .map((child) => (data.connected ?\n            jumpTo(slides, child) :\n            child\n        ))\n        .pipe(activations);\n\n        // On change of .active view, check it is a child element that is not\n        // already active and scroll to it\n        Stream\n        .combine({ host: load, child: views })\n        .map((state) => (data.elements.includes(state.child) && data.active !== state.child ?\n            state.child :\n            undefined\n        ))\n        .map((child) => (data.connected ?\n            data.active ?\n                // This is an activation, scroll to the new active child\n                scrollTo(slides, child) :\n                // If active is not yet defined jump to the newly active child\n                jumpTo(slides, child) :\n            // If not connected pass the child through\n            child\n        ))\n        .pipe(activations);\n\n        // Keep active up-to-date following a scroll\n        scrolls.each((e) => updateActive(data));\n\n        // Enable single finger scroll on mouse devices. Dodgy idea in my\n        // opinion, but it does add support for mouse-only devices.\n        gestures({ threshold: '0.25rem', device: 'mouse' }, shadow)\n        .filter(() => data.children.length > 1)\n        .each((pointers) => {\n            // Keep a reference to pointers, it's used inside processPointers\n            data.pointers = pointers;\n            pointers.reduce(processPointers, data);\n        });\n\n        // Prevent default on immediate clicks after a gesture, and don't let\n        // them out: this is a gesture not a click.\n        clicks\n        .each((e) => {\n            if (e.timeStamp - data.clickSuppressTime < 120) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        });\n\n        // Update positions on entry or exit from fullscreen.\n        events('fullscreenchange', window)\n        .filter((e) => data.active && slot.offsetWidth && slot.offsetHeight)\n        .each((e) => {\n            // If this slide-show was involved in the fullscreen change\n            // reposition the active slide, it may have been shuftied.\n            if (e.target === this || e.target.contains(this)) {\n                jumpTo(slides, data.active);\n            }\n        });\n\n        // Chrome behaves nicely when shifting focus between slot, Safari and\n        // FF not so much. Let's give them a helping hand at displaying the\n        // focused slide. Start by tracking the latest input device...\n        Stream\n        .merge(events('pointerdown', this), events('keydown', this))\n        .each((e) => (data.device = e.type === 'keydown' ?\n            'keyboard' :\n            e.pointerType\n        ));\n\n        // Then listen to focus events. Todo: FF not getting this.\n        events('focusin', this)\n        .filter((e) => (data.device === 'keyboard'))\n        .map((e) => (\n            // Is e.target a slide\n            data.children.indexOf(e.target) !== -1 ? e.target :\n            // Or inside a slide\n            data.children.find((child) => child.contains(e.target))\n        ))\n        .pipe(views);\n\n        // While the slide-show is focused allow left and right arrows to\n        // navigate.\n        events('keydown', this)\n        .filter(() => document.activeElement === this || this.contains(document.activeElement))\n        .map(overload(get('keyCode'), {\n            // Left arrow\n            37: (e) => {\n                // If we don't preventDefault FF jumps two slot - it scrolls\n                // once for the handler and once for its default scroll paging\n                e.preventDefault();\n                return data.elements[data.elements.indexOf(data.active) - 1];\n            },\n            // Right arrow\n            39: (e) => {\n                // If we don't preventDefault FF jumps two slot - it scrolls\n                // once for the handler and once for its default scroll paging\n                e.preventDefault();\n                return data.elements[data.elements.indexOf(data.active) + 1];\n            },\n            // Other keys\n            default: noop\n        }))\n        .pipe(views);\n\n        // Neuter streams intended as push-only, just as a sanity check\n        if (window.DEBUG) {\n            load.pipe = null;\n        }\n    },\n\n    load: function (shadow) {\n        const data = this[$data];\n        data.load.push(this);\n    },\n\n    connect: function(shadow) {\n        const data = this[$data];\n        data.connected = true;\n        data.connects.push(true);\n    },\n\n    disconnect: function(shadow) {\n        const data = this[$data];\n        data.connected = false;\n        //data.connects.push(false);\n    }\n};\n", "\n/**\ncreateBoolean(definition)\nCreates a boolean attribute/property definition for element(), where\n`definition` is an object with the functions:\n\n```js\n{\n    enable: fn,\n    disable: fn,\n    getState: fn\n}\n```\n**/\n\nexport default function createBoolean(definition) {\n    function update(element, state) {\n        if (definition.getState(element) === state) { return; }\n        return definition[state ? 'enable' : 'disable'](element);\n    }\n\n    return {\n        attribute: function(value) {\n            return update(this, value !== null);\n        },\n\n        set: function(value) {\n            return update(this, !!value);\n        },\n\n        get: function() {\n            return definition.getState(this);\n        },\n\n        enumerable: true\n    };\n}\n", "/**\nremove(array, value)\nRemove `value` from `array`. Where `value` is not in `array`, does nothing.\n**/\n\nexport default function remove(array, value) {\n    if (array.remove) { array.remove(value); }\n\n    let i;\n    while ((i = array.indexOf(value)) !== -1) {\n        array.splice(i, 1);\n    }\n\n    return array;\n}\n", "\nimport remove from 'fn/remove.js';\n\nconst assign = Object.assign;\n\n\n/*\nTokenList(element, definitions)\n\nCreate a TokenList-like object.\n\nThe optional `definitions` object is a map of accepted tokens, each one\nrepresented by an object with the functions `enable()` and `disable()`:\n\n```js\nnew TokenList(element, {\n    token: {\n        enable: function(element) { ... },\n        disable: function(element) { ... }\n    }\n});\n```\n*/\n\nexport default function TokenList(element, definitions) {\n    this.element     = element;\n    this.definitions = definitions;\n    this.tokens      = [];\n}\n\nassign(TokenList.prototype, {\n    contains: function(string) {\n\t\treturn this.tokens.includes(string);\n\t},\n\n    add: function() {\n        let n = arguments.length;\n\n        while (n--) {\n            const token = arguments[n];\n\n            if (!this.tokens.includes(token)) {\n                this.tokens.push(token);\n\n                // Call definition.enable() with element as context\n                if (this.supports(token)) {\n                    this.definitions[token].enable(this.element);\n                }\n            }\n        }\n    },\n\n    remove: function() {\n        let n = arguments.length;\n\n        while (n--) {\n            const token = arguments[n];\n\n            if (this.tokens.includes(token)) {\n                remove(this.tokens, token);\n\n                // Call the definition.disable() with element as context\n                if (this.supports(token)) {\n                    this.definitions[token].disable(this.element);\n                }\n            }\n        }\n    },\n\n    supports: function(token) {\n        return !!this.definitions && !!this.definitions[token];\n    }\n});\n", "\nconst A      = Array.prototype;\n\n/*\nupdate(list, tokens)\nThe missing update function for TokenLists. Compares existing tokens with\na new list of tokens, removes those that are not in the new list, and adds\nthose that do not exist.\n*/\n\nexport default function updateTokenList(list, tokens) {\n    const removes = list.tokens.slice();\n    const adds    = A.slice.apply(tokens);\n\n    let n = removes.length;\n    while (n--) {\n        if (adds.includes(removes[n])) {\n            removes.splice(n, 1);\n        }\n    }\n\n    list.remove.apply(list, removes);\n    list.add.apply(list, adds);\n}\n", "\nimport TokenList       from './token-list.js';\nimport updateTokenList from './update-token-list.js';\n\n\n/**\ncreateTokenList(definitions)\nCreates a token list attribute/property definition ready for element(), where\n`definitions` is an object of named token definitions of the form:\n\n```js\ncreateTokenList({\n    token: {\n        enable: fn,\n        disable: fn\n    },\n\n    ...\n})\n```\n**/\n\nexport default function createTokenList(definitions) {\n    // We lazily create a TokenList as needed, not so much for efficacy, but\n    // because we don't have a reference to element until the attribute or\n    // property is accessed. We have to store that TokenList somewhere unique -\n    // this definition may be shared across many elements - so lets make a\n    // symbol property that identifies this definition. I know. It's a little\n    // bit meh, but this is a problem with the custom elements API, really.\n    const $tokenlist = Symbol('TokenList');\n\n    function update(element, string) {\n        const list = element[$tokenlist] || (element[$tokenlist] = new TokenList(element, definitions));\n        updateTokenList(list, string.trim().split(/\\s+/));\n    }\n\n    return {\n        attribute: function(value) {\n            update(this, value || '');\n        },\n\n        set: function(value) {\n            update(this, value + '');\n        },\n\n        get: function() {\n            return this[$tokenlist] || (this[$tokenlist] = new TokenList(this, definitions));\n        },\n\n        enumerable: true\n    };\n}\n", "\n/*\nAutoplay\n*/\n\nimport id         from 'fn/id.js';\nimport get        from 'fn/get.js';\nimport overload   from 'fn/overload.js';\nimport parseValue from 'fn/parse-value.js';\nimport Stream     from 'fn/stream.js';\nimport events     from 'dom/events.js';\n\nimport { $data }  from './consts.js';\n\nconst parseTime = parseValue({\n    's':  id,\n    'ms': (n) => n / 1000\n});\n\n/*\nTODO: dont autoplay when hidden??\n\nevents('visibilitychange', document).each((e) => {\n    if (document.hidden) {\n\n    }\n    else {\n\n    }\n});\n*/\n\nfunction change(data) {\n    const { active, children, elements, host } = data;\n    const i = elements.indexOf(active);\n    const target = elements[i + 1] || children[0];\n    //console.log('AUTOPLAY CHANGE', target);\n    data.autoplay.timer = null;\n    if (!target) { return; }\n    host.active = target;\n}\n\nfunction update(data) {\n    const { active, style } = data;\n    const duration = parseTime(\n        window\n        .getComputedStyle(active)\n        .getPropertyValue('--slide-duration') ||\n        style.getPropertyValue('--slide-duration')\n    );\n\n    clearTimeout(data.autoplay.timer);\n    //console.log('AUTOPLAY UPDATE', duration);\n    data.autoplay.timer = setTimeout(change, duration * 1000, data);\n}\n\nfunction cancel(data) {\n    //console.log('AUTOPLAY CANCEL');\n    clearTimeout(data.autoplay.timer);\n    data.autoplay.timer = null;\n}\n\nexport function enable(host) {\n    const data = host[$data];\n    const { actives } = data;\n\n    // Add an object to store autoplay state\n    const autoplay = data.autoplay = {};\n\n    // Create a stream of hover states starting with false. Note that this is\n    // an assumption - the cursor may well be in hover state when autoplay is\n    // enabled.\n    const hovers = Stream.merge(\n        [false],\n        events('pointerenter pointerleave', host)\n        .map((e) => e.type === 'pointerenter')\n    );\n\n    // Create a stream of focus inside state\n    const focuses = Stream.merge(\n        [host.contains(document.activeElement)],\n        events('focusin focusout', host)\n        .map(overload(get('type'), {\n            'focusin': (e) => true,\n            'focusout': (e) => host.contains(e.relatedTarget)\n        }))\n    )\n    // Deduplicate\n    .map(((v) => (value) => (v === value ? undefined : (v = value)))());\n\n    // Schedule a change timer on every activate where the user is not\n    // hovering, or at the end of the hover\n    autoplay.updates = Stream\n        .combine({ active: actives, hover: hovers, focus: focuses })\n        .each((state) => (state.hover || state.focus ?\n            cancel(data) :\n            update(data)\n        ));\n}\n\nexport function disable(host) {\n    const data = host[$data];\n    cancel(data);\n    data.autoplay.updates.stop();\n    data.autoplay = undefined;\n}\n\nexport function getState(host) {\n    const data = host[$data];\n    return !!data.autoplay;\n}\n", "\nimport rect   from 'dom/rect.js';\n\nimport { $data }  from './consts.js';\nimport { jumpTo } from './active.js';\n\n\nfunction toLoopGhost(slide, i) {\n    const ghost = slide.cloneNode(true);\n    ghost.dataset.slideIndex = i;\n    ghost.removeAttribute('id');\n    ghost.setAttribute('aria-hidden', 'true');\n    ghost.tabIndex = '-1';\n    return ghost;\n}\n\nfunction render(data) {\n    const { active, children, host, slides } = data;\n\n    if (data.loop.prepends) {\n        data.loop.prepends.forEach((slide) => slide.remove());\n        data.loop.appends.forEach((slide) => slide.remove());\n        data.loop.prepends = undefined;\n        data.loop.appends = undefined;\n    }\n\n    if (children.length < 2) {\n        // Dont wait for the slotchange event, which is fired after the one\n        // that caused this render has completed. Synchronously update\n        // data.elements or our state is out of sync for the activation of\n        // other components.\n        data.elements = data.slot.assignedElements();\n        return;\n    }\n\n    // Expand children to the left and right by at least 1 slide plus the width\n    // of the host slide-show. Todo: by rights, this should change on resize.\n    const loopOverflow = host.clientWidth;\n    const boxes        = children.map(rect);\n    const left         = boxes[1].left;\n    const right        = boxes[boxes.length - 2].right;\n\n    // Always append a minimum of 1 slide\n    let n = 1;\n    while (boxes[++n] && boxes[n].left < left + loopOverflow);\n    const appends = children.slice(0, n).map(toLoopGhost);\n\n    // Always prepend a minimum of 1 slide\n    n = boxes.length - 2;\n    while (boxes[--n] && boxes[n].right > right - loopOverflow);\n    const prepends = children.slice(++n).map((slide, i) => toLoopGhost(slide, n + i));\n\n    host.prepend.apply(host, prepends);\n    host.append.apply(host, appends);\n    data.loop.prepends = prepends;\n    data.loop.appends  = appends;\n\n    // Dont wait for the slotchange event, which is fired after the one\n    // that caused this render has completed. Synchronously update\n    // data.elements or our state is out of sync for the activation of\n    // other components.\n    data.elements = data.slot.assignedElements();\n\n    jumpTo(slides, active || children[0]);\n}\n\nexport function enable(host) {\n    const data = host[$data];\n    const { mutations } = data;\n\n    // Add an object to store loop state\n    const loop = data.loop = {};\n\n    // Render ghosts when children change\n    loop.renders = mutations.each((children) => render(data));\n}\n\nexport function disable(host) {\n    const data = host[$data];\n    if (data.loop) {\n        data.loop.prepends && data.loop.prepends.forEach((slide) => slide.remove());\n        data.loop.appends  && data.loop.appends.forEach((slide) => slide.remove());\n        data.loop.renders.stop();\n        data.loop = undefined;\n    }\n}\n\nexport function getState(host) {\n    const data = host[$data];\n    return !!data.loop;\n}\n", "\n/**\nslot=\"previous\"\n\nAvailable when the slideshow has `controls=\"navigation\"` enabled, this slot\nallows the inclusion of html content into the 'previous' navigation button. By\ndefault the slot contains an inline SVG of an icon, and some text (in English).\nDefining HTML for the slot replaces that default content:\n\n```html\n<slide-show controls=\"navigation\">\n    <svg slot=\"previous\" aria-hidden=\"true\">\n        <use href=\"#back-icon\" />\n    </svg>\n    <span slot=\"previous\">DerniÃ¨re</span>\n</slide-show>\n```\n**/\n\n/**\nslot=\"next\"\nAvailable when the slideshow has `controls=\"navigation\"` enabled, this slot\nallows the inclusion of html content into the 'next' navigation button. By\ndefault the slot contains an inline SVG of an icon, and some text (in English).\nDefining HTML for the slot replaces that default content:\n\n```html\n<slide-show controls=\"navigation\">\n    <svg slot=\"next\" aria-hidden=\"true\">\n        <use href=\"#forward-icon\" />\n    </svg>\n    <span slot=\"next\">Prochaine</span>\n</slide-show>\n```\n**/\n\nimport Stream   from 'fn/stream.js';\nimport create   from 'dom/create.js';\nimport delegate from 'dom/delegate.js';\n\nimport { activatePrevious, activateNext, activateIndex } from './active.js';\nimport { $data }         from './consts.js';\n\nfunction update(slides, prev, next, elements, i) {\n    // Preemptively hide buttons now (before new active is detected at\n    // end of scroll)\n    if (i === 0 || slides.scrollLeft === 0) {\n        prev.disabled = true;\n        //prev.style.visibility = 'hidden';\n    }\n    else {\n        prev.disabled = false;\n        //prev.style.visibility = '';\n    }\n\n    if (i === elements.length - 1 || slides.scrollLeft >= slides.scrollWidth - slides.clientWidth) {\n        next.disabled = true;\n        //next.style.visibility = 'hidden';\n    }\n    else {\n        next.disabled = false;\n        //next.style.visibility = '';\n    }\n}\n\nexport function enable(host) {\n    const data = host[$data];\n    const { actives, clicks, slotchanges, slides, scrolls } = data;\n\n    // Add an object to store navigation state\n    const navigation = data.navigation = {\n        prev: create('button', {\n            part: 'previous',\n            type: \"button\",\n            name: \"navigation\",\n            value: \"-1\",\n            children: [create('slot', {\n                name: 'previous',\n                html: `\n                    <svg viewBox=\"0 0 30 40\" aria-hidden=\"true\">\n                        <path d=\"M19,9 L9,20 L19,31\"></path>\n                    </svg>\n                    Previous\n                `\n            })]\n        }),\n\n        next: create('button', {\n            part: 'next',\n            type: \"button\",\n            name: \"navigation\",\n            value: \"1\",\n            children: [create('slot', {\n                name: 'next',\n                html: `\n                    <svg viewBox=\"0 0 30 40\" aria-hidden=\"true\">\n                        <path d=\"M11,9 L21,20 L11,31\"></path>\n                    </svg>\n                    Next\n                `\n            })]\n        })\n    };\n\n    data.controls.prepend(navigation.prev, navigation.next);\n\n    // Create a stream of updates starting with the current active\n    navigation.updates = Stream\n    .combine({ active: actives, changes: slotchanges, scroll: scrolls })\n    .each((state) => update(\n        slides,\n        navigation.prev,\n        navigation.next,\n        state.changes.elements,\n        state.changes.elements.indexOf(state.active)\n    ));\n\n    navigation.clicks = clicks.each(delegate({\n        // Slotted content does not delegate through it's parent element, but it\n        // does delegate through shadow, weirdly\n        '[slot=\"previous\"]':   (node, e) => activatePrevious(host, data.elements, data.active),\n        '[slot=\"next\"]':       (node, e) => activateNext(host, data.elements, data.active),\n        '[name=\"navigation\"]': (button, e) => {\n            const i = data.elements.indexOf(data.active) + parseFloat(button.value);\n            activateIndex(host, data.elements, i);\n        }\n    }));\n}\n\nexport function disable(host) {\n    const data = host[$data];\n    data.navigation.prev.remove();\n    data.navigation.next.remove();\n    data.navigation.updates.stop();\n    data.navigation.clicks.stop();\n    data.navigation = undefined;\n}\n\nexport function getState(host) {\n    const data = host[$data];\n    return !!data.navigation;\n}\n", "\n/**\ndelegate(map)\n\nTakes an object map of functions keyed to selectors, and returns a function that\nhandles event objects, delegating them to the first function whose selector\nmatches the event target. Functions are passed the target node and the event\nobject, plus any other arguments passed to the handler.\n\n```\ndelegate({\n\t'button': (button, event) => {}\n})\n```\n**/\n\nexport default function delegate(object) {\n\tif (typeof object !== 'object' || arguments.length > 1) {\n\t\tthrow new Error('delegate() now takes an object of selector:fn pairs.');\n\t}\n\n\t// Create an event handler that looks up the ancestor tree\n\t// to find selector.\n\treturn function handle(e) {\n\t\tconst target = e.target;\n\t\tlet selector;\n\t\tfor (selector in object) {\n\t\t\tconst node = target.closest(selector);\n\t\t\tif (node) {\n\t\t\t\treturn object[selector](node, ...arguments);\n\t\t\t}\n\t\t}\n\t};\n}\n", "\nimport Stream   from 'fn/stream.js';\nimport create   from 'dom/create.js';\nimport delegate from 'dom/delegate.js';\n\nimport { $data }          from './consts.js';\n\n\nfunction update(pagination, children, target) {\n    const { active, buttons, index } = pagination;\n\n    // Do nothing where target is already the active page-button\n    if (active === target) { return; }\n\n    if (index > -1) {\n        pagination.activeSpan.remove();\n        buttons.children[index].part.remove('page-button-active');\n    }\n\n    const i = children.indexOf(target);\n    if (i === -1) { return; }\n\n    buttons.children[i].part.add('page-button-active');\n    buttons.children[i].append(pagination.activeSpan);\n    pagination.index  = i;\n    pagination.active = target;\n}\n\nfunction render(controls, pagination, shadow, children) {\n    if (pagination.buttons) {\n        pagination.buttons.remove();\n        pagination.buttons = undefined;\n    }\n\n    // Don't generate pagination when there are 0 or 1 slides\n    if (children.length < 2) { return children.length; }\n\n    pagination.buttons = create('div', {\n        part: 'pagination',\n        children: children.map((slide, i) => create('button', {\n            part: 'page-button',\n            type: 'button',\n            name: 'pagination',\n            value: i\n        }))\n    });\n\n    controls.append(pagination.buttons);\n    return children.length;\n}\n\nexport function enable(host) {\n    const data = host[$data];\n    const { shadow, actives, clicks, mutations } = data;\n\n    // Add an object to store autoplay state\n    const pagination = data.pagination = {\n        // Element containing accessibility text marking a button as active\n        activeSpan: create('span', { class: 'invisible', text: '(Current slide)' })\n    };\n\n    // Render buttons when children change\n    pagination.mutations = mutations\n    .each(() => render(data.controls, pagination, shadow, data.children));\n\n    // Create a new stream of updates that happen when a slide activates and\n    // when enough children become available for pagination\n    pagination.updates = Stream\n    .combine({ active: actives, children: mutations })\n    .filter((state) => state.children.length > 1)\n    .each((state) => update(pagination, data.children, data.active));\n\n    pagination.clicks = clicks.each(delegate({\n        '[name=\"pagination\"]': function(button, e) {\n            const { host } = data;\n            const children = data.children;\n            const target = children[button.value];\n\n            if (!target) { return; }\n            host.active = target;\n\n            // Preemptively highlight pagination button\n            update(pagination, children, target);\n        }\n    }));\n}\n\nexport function disable(host) {\n    const data = host[$data];\n    data.pagination.buttons.remove();\n    data.pagination.mutations.stop();\n    data.pagination.updates.stop();\n    data.pagination.clicks.stop();\n    data.pagination = undefined;\n}\n\nexport function getState(host) {\n    const data = host[$data];\n    return !!data.pagination;\n}\n", "\n/**\nslot=\"fullscreen-button\"\n\nAvailable when the slideshow has `controls=\"fullscreen\"` enabled, this slot\nallows the inclusion of html content into the fullscreen button. By default the\nslot contains an inline SVG of an icon, and some text (in English). Defining\nHTML for the slot replaces that default content:\n\n```html\n<slide-show controls=\"fullscreen\">\n    <svg slot=\"fullscreen-button\" aria-hidden=\"true\">\n        <use href=\"#fullscreen-icon\" />\n    </svg>\n    <span slot=\"fullscreen-button\">Plein Ã©cran</span>\n</slide-show>\n```\n**/\n\nimport create    from 'dom/create.js';\nimport delegate  from 'dom/delegate.js';\nimport events    from 'dom/events.js';\nimport { fullscreenEnabled, getFullscreenElement, enterFullscreen, exitFullscreen } from 'dom/fullscreen.js';\n\nimport { $data } from './consts.js';\n\nif (window.DEBUG && !fullscreenEnabled) {\n    console.warn('<slide-show> Browser does not support fullscreen API, fullscreen controls will not shown');\n}\n\nexport function enable(host) {\n    const data = host[$data];\n\n    if (!fullscreenEnabled) {\n        return;\n    }\n\n    // Add an object to store navigation state\n    const fullscreen = data.fullscreen = {\n        button: create('button', {\n            part: 'fullscreen-button',\n            type: \"button\",\n            name: \"fullscreen\",\n            children: [create('slot', {\n                name: 'fullscreen-button',\n                html: `\n                    <svg viewBox=\"0 0 40 40\" aria-hidden=\"true\">\n                        <path class=\"fullscreen-hidden\" d=\"M9,9 L17,17 M9,15 L9,9 L15,9 M9,31 L17,23 M9,25 L9,31 L15,31 M31,31 L23,23 M25,31 L31,31 L31,25 M31,9 L23,17 M25,9 L31,9 L31,15\"></path>\n                        <path class=\"fullscreen-shown\"  d=\"M9,9 L31,31 M9,31 L31,9\"></path>\n                    </svg>\n                    <span class=\"fullscreen-hidden\">Open in fullscreen</span>\n                    <span class=\"fullscreen-shown\">Close fullscreen</span>\n                `\n            })]\n        }),\n    };\n\n    //data.fullscreen.button.append(text);\n    data.controls.append(fullscreen.button);\n\n    fullscreen.changes = events('fullscreenchange', host)\n    .filter((e) => getFullscreenElement() === host)\n    .each((e) => {\n        // Setup fullscreen\n\n        // In Chrome and FF, the fullscreen element receives focus without an\n        // explicit tabIndex, in Safari we must encourage it by adding one.\n        // When focus is inside a custom element document.activeElement points\n        // to the host (or is this true only for closed shadows?)\n        if (document.activeElement !== host) {\n            fullscreen.tabIndex = host.tabIndex;\n            if (host.tabIndex < 0) { host.tabIndex = 0; }\n            host.focus();\n        }\n\n        // Setup fullscreen exit\n        const fullscreenend = events('fullscreenchange', host)\n        .each((e) => {\n            host.tabIndex = fullscreen.tabIndex;\n            fullscreen.tabIndex = undefined;\n            fullscreenend.stop();\n        });\n    });\n\n    fullscreen.clicks = data.clicks.each(delegate({\n        // Slotted content does not delegate through it's parent element, but it\n        // does delegate through shadow, weirdly\n        '[slot=\"fullscreen-button\"], [name=\"fullscreen\"]': (target, e) => {\n            const fullscreenCurrent = getFullscreenElement();\n\n            // Make button act as toggle: close the fullscreen\n            if (fullscreenCurrent === host) {\n                exitFullscreen();\n                return;\n            }\n\n            if (fullscreenCurrent) {\n                exitFullscreen();\n            }\n\n            enterFullscreen(host);\n        }\n    }));\n}\n\nexport function disable(host) {\n    const data = host[$data];\n    const fullscreenCurrent = getFullscreenElement();\n\n    if (fullscreenCurrent === host) {\n        exitFullscreen();\n    }\n\n    data.fullscreen.button.remove();\n    data.fullscreen.clicks.stop();\n    data.fullscreen.changes.stop();\n    data.fullscreen = undefined;\n}\n\nexport function getState(host) {\n    const data = host[$data];\n    return !!data.fullscreen;\n}\n", "\n// Not true in iPhone iOS.\nexport const fullscreenEnabled = document.fullscreenEnabled\n    || document.mozFullscreenEnabled\n    || document.webkitFullscreenEnabled\n    || document.msFullscreenEnabled ;\n\nexport function getFullscreenElement() {\n    return document.fullscreenElement\n        || document.webkitFullscreenElement\n        || document.mozFullScreenElement\n        || document.msFullscreenElement ;\n}\n\nexport function enterFullscreen(node) {\n    return node.requestFullscreen ? node.requestFullscreen() :\n        node.webkitRequestFullscreen ? node.webkitRequestFullscreen() :\n        node.mozRequestFullScreen ? node.mozRequestFullScreen() :\n        node.msRequestFullscreen ? node.msRequestFullscreen() :\n        undefined ;\n}\n\nexport function exitFullscreen() {\n    document.exitFullscreen ? document.exitFullscreen() :\n    document.webkitExitFullscreen ? document.webkitExitFullscreen() :\n    document.mozCancelFullScreen ? document.mozCancelFullScreen() :\n    document.msExitFullscreen ? document.msExitFullscreen() :\n    undefined ;\n}\n", "\nimport createBoolean   from 'dom/element-1/create-boolean.js';\nimport createTokenList from 'dom/element-1/create-token-list.js';\n\nimport { $data }       from './consts.js';\nimport * as autoplay   from './autoplay.js';\nimport * as loop       from './loop.js';\nimport * as navigation from './navigation.js';\nimport * as pagination from './pagination.js';\nimport * as fullscreen from './fullscreen.js';\n\n\n/* Properties */\n\nexport default {\n    /**\n    active=\"#id\"\n    Sets the initial scroll-snapped slide, where `#id` must be the id of a\n    direct child of the `<slide-show>`.\n\n    ```html\n    <slide-show active=\"#tractor\">\n        <img src=\"./images/tractor.jpg\" draggable=\"false\" id=\"tractor\">\n    </slide-show>\n    ```\n    **/\n\n    /**\n    .active\n    Gets or sets the currently scroll-snapped slide.\n\n    ```js\n    const activeSlide = slideshow.active;\n    ```\n\n    May be set to one of the child elements, or to the id of one of the\n    child elements, causing the `slide-show` to scroll.\n\n    ```js\n    slideshow.active = 'slide-1';\n    ```\n    **/\n\n    active: {\n        attribute: function(id) {\n            this.active = id;\n        },\n\n        set: function(id) {\n            const data = this[$data];\n\n                // Accept an element\n            const child = typeof id === 'object' ? id :\n                // Accept an index (??)\n                /^\\d/.test(id + '') ? this.querySelector('#\\\\3' + (id + '')[0] + ' ' + (id + '').slice(1)) :\n                // Accept an #id\n                /^\\#/.test(id + '') ? this.querySelector(id) :\n                // Accept an id\n                this.querySelector('#' + id) ;\n\n            data.views.push(child);\n        },\n\n        get: function() {\n            return this[$data].active;\n        }\n    },\n\n    /**\n    .activateNext()\n    Activates the next slide.\n    **/\n\n    activateNext: {\n        value: function() {\n            const { elements, views, active } = this[$data];\n            views.push(elements[elements.indexOf(active) + 1]);\n            return this;\n        }\n    },\n\n    /**\n    .activatePrevious()\n    Activates the previous slide.\n    **/\n\n    activatePrevious: {\n        value: function() {\n            const { elements, views, active } = this[$data];\n            views.push(elements[elements.indexOf(active) - 1]);\n            return this;\n        }\n    },\n\n    /**\n    autoplay=\"\"\n    Boolean attribute. When present the `slide-show` activates the next\n    slide after a pause.\n\n    ```html\n    <slide-show autoplay>â€¦</slide-show>\n    ```\n\n    The pause duration may be set with the CSS variable\n    `--slide-duration`. Autoplay is also paused when a mouse pointer is\n    inside the `slide-show`, or when a slide has focus.\n    **/\n\n    /**\n    .autoplay\n\n    Boolean property. When `true` the slide-show activates the next\n    slide after a pause. The pause duration may be set with the CSS variable\n    `--slide-duration`. Autoplay is also paused when a mouse pointer is\n    inside the `slide-show`, or when a slide has focus.\n\n    ```js\n    slideshow.autoplay = true;\n    ```\n    **/\n\n    autoplay: createBoolean(autoplay, 'autoplay'),\n\n    /**\n    controls=\"\"\n    An attribute that accepts the tokens `\"navigation\"`, `\"pagination\"`\n    and `\"fullscreen\"`. The presence of one of these tokens enables the\n    corresponding controls.\n\n    ```html\n    <slide-show controls=\"navigation fullscreen\">â€¦</slide-show>\n    ```\n    **/\n\n    /**\n    .controls\n    A TokenList object (like `.classList`) that supports the tokens\n    `\"navigation\"`, `\"pagination\"` and `\"fullscreen\"`.\n\n    ```js\n    slideshow.controls.add('pagination');\n    ```\n    **/\n\n    controls: createTokenList({\n        'navigation': navigation,\n        'pagination': pagination,\n        'fullscreen': fullscreen\n    }),\n\n    /**\n    loop=\"\"\n    Boolean attribute. When present, the `slide-show` behaves as a continuous\n    loop.\n\n    ```html\n    <slide-show loop>â€¦</slide-show>\n    ```\n\n    Looping works by duplicating some of the children of the `slide-show`.\n    Duplicate elements are given `aria-hidden=\"true\"` and `tab-index=\"-1\"`, and\n    have `id` attributes stripped off in an attempt to make them inert.\n    **/\n\n    /**\n    .loop\n    Boolean property. When `true`, the `slide-show` behaves as a continuous loop.\n\n    ```js\n    slideshow.loop = true;\n    ```\n\n    Looping works by duplicating some of the children of the `slide-show`.\n    Duplicate elements are given `aria-hidden=\"true\"` and `tab-index=\"-1\"`, and\n    have `id` attributes stripped off in an attempt to make them inert.\n    **/\n\n    loop: createBoolean(loop, 'loop')\n};\n", "\n/** Get started\n\nDownload the latest release:\n\n[`github.com/stephband/slide-show/releases`](https://github.com/stephband/slide-show/releases)\n\nThen include the JS and CSS files:\n\n```html\n<link rel=\"stylesheet\" href=\"./build/element.css\" />\n<script type=\"module\" src=\"./build/element.js\"></script>\n```\n\nYou can now use the `<slide-show>` in your HTML. The `<slide-show>` example\nabove looks something like this:\n\n```html\n<slide-show autoplay loop controls=\"navigation pagination fullscreen\">\n    <img src=\"./images/donkeys.jpg\" draggable=\"false\" />\n    <img src=\"./images/tractor.jpg\" draggable=\"false\" />\n    <img src=\"./images/mauverin.jpg\" draggable=\"false\" />\n</slide-show>\n```\n\nA `<slide-show>` lays out its children horizontally, by default in `grid` layout.\nContent is horizontally scrollable via touch or trackpad, draggable with a mouse\n(making it a Good Idea to add `draggable=\"false\"`to images and links), and also\nnavigable via keyboard focus.\n\nA `<slide-show>` is not just for images. Content may be any HTML. Here's a\n`<slide-show>` being employed as tabbed navigation:\n\n<slide-show class=\"tab-slide-show\">\n    <a class=\"tab-button button\" href=\"#1\" draggable=\"false\">Explore</a>\n    <a class=\"tab-button button active\" href=\"#2\" draggable=\"false\">Buy</a>\n    <a class=\"tab-button button\" href=\"#3\" draggable=\"false\">Free trial</a>\n    <a class=\"tab-button button\" href=\"#4\" draggable=\"false\">About</a>\n    <a class=\"tab-button button\" href=\"#5\" draggable=\"false\">Student discount</a>\n    <a class=\"tab-button button\" href=\"#6\" draggable=\"false\">Contact us</a>\n</slide-show>\n**/\n\n// Polyfill Element.scrollTo() for Safari\n// Not needed since Safari 14:\n// https://caniuse.com/?search=scrollto\n//import 'dom/polyfills/element.scrollto.js';\n\nimport element    from 'dom/element.js';\nimport lifecycle  from './modules/lifecycle.js';\nimport properties from './modules/properties.js';\n\nlifecycle.shadow = `<link rel=\"stylesheet\" href=\"${ window.slideshowStylesheet || new URL('shadow.css', import.meta.url) }\"/>`;\n\nexport default element('slide-show', lifecycle, properties, 'stephen.band/slide-show/');\n"],
  "mappings": "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",
  "names": ["cacheByObject", "fn", "map", "object", "value", "A", "applyFn", "fn", "args", "curry", "muteable", "arity", "memo", "cacheByObject", "object", "partial", "curry_default", "exec", "regex", "fn", "string", "data", "tokens", "output", "exec_default", "curry_default", "error", "regex", "reducers", "string", "reduce", "acc", "tokens", "n", "capture", "output", "exec", "capture_default", "curry_default", "id", "value", "noop", "overload", "fn", "map", "key", "handler", "assignProperty", "overload", "id", "noop", "name", "node", "object", "content", "setAttribute", "assign", "attributes", "names", "n", "assign_default", "curry_default", "svgNamespace", "template", "typeofContent", "type", "content", "createContextFragment", "context", "html", "range", "createSVG", "overload", "tag", "node", "object", "assign_default", "createHTML", "create", "id", "text", "fragment", "create_default", "$internals", "createInternals", "Element", "element", "shadow", "getInternals", "define", "constructors", "formProperties", "name", "getInternals", "supportsCustomisedBuiltIn", "parseNameTag", "capture_default", "data", "captures", "onceEvent", "toLoadPromise", "element", "resolve", "reject", "stop", "object", "getElementConstructor", "tag", "constructor", "transferProperty", "key", "value", "createShadow", "elem", "options", "shadow", "link", "create_default", "fillShadowFromTemplate", "template", "isNotUpgraded", "upgraded", "findByIs", "root", "createDescriptor", "overload", "descriptor", "fn", "definition", "lifecycle", "properties", "log", "attributes", "descriptors", "propname", "Element", "internals", "createInternals", "define", "disabled", "old", "links", "style", "promise", "div", "noop", "upgrade", "store", "n", "attribute", "polyfillByRoot", "equals", "a", "b", "akeys", "bkeys", "n", "equals_default", "curry_default", "get", "key", "object", "get_default", "curry_default", "arg", "n", "self", "create", "freeze", "nothing_default", "noop", "self", "arg", "id", "to_type_default", "object", "define", "call", "overload", "to_type_default", "fn", "object", "Stopable", "id", "#stopables", "stopables", "throwTypeError", "source", "push", "stream", "value", "stop", "Stopable", "o", "output", "removeInput", "input", "i", "removeOutput", "unpipe", "Consumer", "Each", "fn", "Reduce", "accumulator", "Stream", "inputloop", "values", "BufferStream", "Filter", "FlatMap", "Map", "initial", "Scan", "n", "m", "Slice", "Split", "setResolve", "res", "rej", "noop", "overload", "to_type_default", "object", "PromiseStream", "Value", "inputs", "Merge", "promise", "result", "chunk", "assign", "create", "Combine", "object", "options", "Stream", "values", "inputs", "name", "input", "value", "assign", "create", "ClockStream", "duration", "Stream", "startTime", "fn", "time", "sendStopFrame", "assign", "create", "Throttle", "duration", "Stream", "value", "clock", "ClockStream", "fn", "time", "sendLastValue", "A", "assign", "assign", "Stream", "object", "options", "Combine", "duration", "ClockStream", "time", "Throttle", "self", "rspaces", "types", "cacheByObject", "clickTimeStamp", "listen", "listener", "type", "unlisten", "Events", "Stream", "options", "node", "initialEvent", "e", "modifiers", "n", "selectedTarget", "events", "runit", "parseValue", "units", "string", "entry", "to_rad_default", "n", "parse_angle_default", "parseValue", "to_rad_default", "id", "n", "string", "rpx", "rangle", "computedStyle", "name", "node", "style", "value", "parse_angle_default", "emSize", "remSize", "getEmSize", "styledFontSize", "style", "getRemSize", "px", "overload", "to_type_default", "id", "parseValue", "n", "parse_length_default", "A", "assign", "userSelect", "store", "config", "clickSuppressionTimestamp", "stopPropagation", "distanceThreshold", "distance", "x", "y", "PointerStream", "Stream", "stream", "target", "e", "options", "parse_length_default", "t", "overload", "get_default", "e0", "isIgnoreTag", "tag", "Gestures", "node", "event", "gestures", "isPrimaryButton", "windowBox", "rect", "node", "assign", "defaults", "trigger", "type", "node", "options", "properties", "detail", "bubbles", "cancelable", "composed", "event", "trigger_default", "curry_default", "$data", "config", "scrollInterval", "updateScrollInterval", "times", "n", "interval", "t", "getScrollInterval", "is_firefox_default", "DOMContentLoaded", "is_firefox_default", "getPaddedBox", "slides", "box", "rect", "computed", "paddingLeft", "paddingRight", "px", "e", "getSnapX", "element", "snap", "scrollToTarget", "target", "behavior", "slidesBox", "targetBox", "position", "scrollTo", "jumpTo", "getAligned", "elements", "leftPadding", "rightPadding", "centrePadding", "n", "slide", "slideRect", "detection", "isGhost", "getActive", "data", "children", "aligned", "updateActive", "current", "active", "activateIndex", "host", "i", "activateNext", "activatePrevious", "resetScroll", "slides", "scrolls", "processPointers", "overload", "data", "e", "x1", "y1", "dx", "scrollLeft1", "scrollLeft2", "active", "getActive", "events", "frame", "i", "stream", "getScrollInterval", "captureOptions", "fire", "stream", "e", "Stream", "times", "updateScrollInterval", "Scrollends", "element", "time", "getScrollInterval", "scrollends", "getWidth", "slides", "slot", "children", "n", "box", "rect", "right", "style", "pl", "px", "pr", "updateWidth", "width", "isSlide", "slide", "lifecycle_default", "shadow", "create_default", "controls", "connects", "Stream", "load", "slotchanges", "events", "e", "data", "mutations", "state", "equals_default", "noop", "views", "activations", "actives", "child", "trigger", "clicks", "isPrimaryButton", "scrolls", "scrollends", "$data", "nothing_default", "jumpTo", "scrollTo", "updateActive", "gestures", "pointers", "processPointers", "overload", "get_default", "createBoolean", "definition", "update", "element", "state", "value", "remove", "array", "value", "i", "assign", "TokenList", "element", "definitions", "string", "n", "token", "remove", "A", "updateTokenList", "list", "tokens", "removes", "adds", "n", "createTokenList", "definitions", "$tokenlist", "update", "element", "string", "list", "TokenList", "updateTokenList", "value", "autoplay_exports", "__export", "disable", "enable", "getState", "parseTime", "parseValue", "id", "n", "change", "data", "active", "children", "elements", "host", "target", "update", "style", "duration", "cancel", "enable", "$data", "actives", "autoplay", "hovers", "Stream", "events", "e", "focuses", "overload", "get_default", "v", "value", "state", "disable", "getState", "loop_exports", "__export", "disable", "enable", "getState", "toLoopGhost", "slide", "i", "ghost", "render", "data", "active", "children", "host", "slides", "loopOverflow", "boxes", "rect", "left", "right", "n", "appends", "prepends", "jumpTo", "enable", "$data", "mutations", "loop", "disable", "getState", "navigation_exports", "__export", "disable", "enable", "getState", "delegate", "object", "e", "target", "selector", "node", "update", "slides", "prev", "next", "elements", "i", "enable", "host", "data", "$data", "actives", "clicks", "slotchanges", "scrolls", "navigation", "create_default", "Stream", "state", "delegate", "node", "e", "activatePrevious", "activateNext", "button", "activateIndex", "disable", "getState", "pagination_exports", "__export", "disable", "enable", "getState", "update", "pagination", "children", "target", "active", "buttons", "index", "i", "render", "controls", "shadow", "create_default", "slide", "enable", "host", "data", "$data", "actives", "clicks", "mutations", "Stream", "state", "delegate", "button", "e", "disable", "getState", "fullscreen_exports", "__export", "disable", "enable", "getState", "fullscreenEnabled", "getFullscreenElement", "enterFullscreen", "node", "exitFullscreen", "enable", "host", "data", "$data", "fullscreenEnabled", "fullscreen", "create_default", "events", "e", "getFullscreenElement", "fullscreenend", "delegate", "target", "fullscreenCurrent", "exitFullscreen", "enterFullscreen", "disable", "getState", "properties_default", "id", "data", "$data", "child", "elements", "views", "active", "createBoolean", "autoplay_exports", "createTokenList", "navigation_exports", "pagination_exports", "fullscreen_exports", "loop_exports", "lifecycle_default", "element_default", "element", "properties_default"]
}
